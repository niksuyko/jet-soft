{"ast":null,"code":"'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNil from \"lodash/isNil\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { List, AutoSizer } from '../internals/Windowing';\nimport { oneOf } from '../internals/propTypes';\nimport TreeNode from './TreeNode';\nimport { createDragPreview, getKeyParentMap, getPathTowardsItem, getTreeNodeIndent, removeDragPreview, stringifyTreeNodeLabel } from '../utils/treeUtils';\nimport { createChainedFunction, useClassNames, useCustom, useControlled, useEventCallback, TREE_NODE_DROP_POSITION, KEY_VALUES, mergeRefs, shallowEqual } from '../utils';\nimport { getExpandWhenSearching, hasVisibleChildren, getDragNodeKeys, calDropNodePosition, createUpdateTreeDataFunction, useTreeDrag, useFlattenTreeData, getTreeActiveNode, getDefaultExpandItemValues, useTreeNodeRefs, useTreeSearch, focusPreviousItem, getFocusableItems, focusNextItem, getActiveItem, toggleExpand, useGetTreeNodeChildren, focusToActiveTreeNode, leftArrowHandler, focusTreeNode, rightArrowHandler, isSearching } from '../utils/treeUtils';\nimport { PickerToggle, PickerPopup, TreeView, PickerToggleTrigger, createConcatChildrenFunction, usePickerClassName, usePickerRef, onMenuKeyDown as _onMenuKeyDown, listPickerPropTypes, pickTriggerPropKeys, omitTriggerPropKeys, useToggleKeyDownEvent } from '../internals/Picker';\nimport SearchBox from '../internals/SearchBox';\nimport TreeContext from '../Tree/TreeContext';\nvar emptyArray = [];\nvar itemSize = function itemSize() {\n  return 36;\n};\n\n/**\n * The `TreePicker` component is used for selecting single options which are organized in a tree structure.\n *\n * @see https://rsuitejs.com/components/tree-picker/\n */\nvar TreePicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n    Component = _props$as === void 0 ? 'div' : _props$as,\n    _props$data = props.data,\n    data = _props$data === void 0 ? emptyArray : _props$data,\n    _props$appearance = props.appearance,\n    appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n    style = props.style,\n    showIndentLine = props.showIndentLine,\n    controlledValue = props.value,\n    overrideLocale = props.locale,\n    _props$height = props.height,\n    height = _props$height === void 0 ? 360 : _props$height,\n    _props$menuMaxHeight = props.menuMaxHeight,\n    menuMaxHeight = _props$menuMaxHeight === void 0 ? 320 : _props$menuMaxHeight,\n    menuStyle = props.menuStyle,\n    className = props.className,\n    disabled = props.disabled,\n    _props$placement = props.placement,\n    placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n    _props$cleanable = props.cleanable,\n    cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n    _props$searchable = props.searchable,\n    searchable = _props$searchable === void 0 ? true : _props$searchable,\n    _props$virtualized = props.virtualized,\n    virtualized = _props$virtualized === void 0 ? false : _props$virtualized,\n    _props$classPrefix = props.classPrefix,\n    classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n    defaultValue = props.defaultValue,\n    placeholder = props.placeholder,\n    searchKeyword = props.searchKeyword,\n    menuClassName = props.menuClassName,\n    _props$menuAutoWidth = props.menuAutoWidth,\n    menuAutoWidth = _props$menuAutoWidth === void 0 ? true : _props$menuAutoWidth,\n    searchBy = props.searchBy,\n    toggleAs = props.toggleAs,\n    _props$labelKey = props.labelKey,\n    labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n    _props$valueKey = props.valueKey,\n    valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n    _props$childrenKey = props.childrenKey,\n    childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n    draggable = props.draggable,\n    _props$defaultExpandA = props.defaultExpandAll,\n    defaultExpandAll = _props$defaultExpandA === void 0 ? false : _props$defaultExpandA,\n    _props$disabledItemVa = props.disabledItemValues,\n    disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n    controlledExpandItemValues = props.expandItemValues,\n    _props$defaultExpandI = props.defaultExpandItemValues,\n    defaultExpandItemValues = _props$defaultExpandI === void 0 ? emptyArray : _props$defaultExpandI,\n    id = props.id,\n    listProps = props.listProps,\n    getChildren = props.getChildren,\n    renderTreeIcon = props.renderTreeIcon,\n    renderTreeNode = props.renderTreeNode,\n    onExit = props.onExit,\n    onExited = props.onExited,\n    onClean = props.onClean,\n    onOpen = props.onOpen,\n    onSearch = props.onSearch,\n    onSelect = props.onSelect,\n    onSelectItem = props.onSelectItem,\n    onChange = props.onChange,\n    onEntered = props.onEntered,\n    onClose = props.onClose,\n    onDragEnd = props.onDragEnd,\n    onDragStart = props.onDragStart,\n    onDragEnter = props.onDragEnter,\n    onDragLeave = props.onDragLeave,\n    onDragOver = props.onDragOver,\n    onDrop = props.onDrop,\n    onExpand = props.onExpand,\n    renderExtraFooter = props.renderExtraFooter,\n    renderMenu = props.renderMenu,\n    renderValue = props.renderValue,\n    rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"appearance\", \"style\", \"showIndentLine\", \"value\", \"locale\", \"height\", \"menuMaxHeight\", \"menuStyle\", \"className\", \"disabled\", \"placement\", \"cleanable\", \"searchable\", \"virtualized\", \"classPrefix\", \"defaultValue\", \"placeholder\", \"searchKeyword\", \"menuClassName\", \"menuAutoWidth\", \"searchBy\", \"toggleAs\", \"labelKey\", \"valueKey\", \"childrenKey\", \"draggable\", \"defaultExpandAll\", \"disabledItemValues\", \"expandItemValues\", \"defaultExpandItemValues\", \"id\", \"listProps\", \"getChildren\", \"renderTreeIcon\", \"renderTreeNode\", \"onExit\", \"onExited\", \"onClean\", \"onOpen\", \"onSearch\", \"onSelect\", \"onSelectItem\", \"onChange\", \"onEntered\", \"onClose\", \"onDragEnd\", \"onDragStart\", \"onDragEnter\", \"onDragLeave\", \"onDragOver\", \"onDrop\", \"onExpand\", \"renderExtraFooter\", \"renderMenu\", \"renderValue\"]);\n  var _useCustom = useCustom('Picker', overrideLocale),\n    rtl = _useCustom.rtl,\n    locale = _useCustom.locale;\n  var _useContext = useContext(TreeContext),\n    inline = _useContext.inline;\n  var _usePickerRef = usePickerRef(ref, {\n      inline: inline\n    }),\n    trigger = _usePickerRef.trigger,\n    root = _usePickerRef.root,\n    target = _usePickerRef.target,\n    overlay = _usePickerRef.overlay,\n    list = _usePickerRef.list,\n    searchInput = _usePickerRef.searchInput,\n    treeView = _usePickerRef.treeView;\n  var _useControlled = useControlled(controlledValue, defaultValue),\n    value = _useControlled[0],\n    setValue = _useControlled[1],\n    isControlled = _useControlled[2];\n  var _useGetTreeNodeChildr = useGetTreeNodeChildren(data, valueKey, childrenKey),\n    treeData = _useGetTreeNodeChildr.data,\n    setTreeData = _useGetTreeNodeChildr.setData,\n    loadingNodeValues = _useGetTreeNodeChildr.loadingNodeValues,\n    loadChildren = _useGetTreeNodeChildr.loadChildren;\n  var _useControlled2 = useControlled(controlledExpandItemValues, getDefaultExpandItemValues(treeData, {\n      defaultExpandAll: defaultExpandAll,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      defaultExpandItemValues: defaultExpandItemValues\n    })),\n    expandItemValues = _useControlled2[0],\n    setExpandItemValues = _useControlled2[1];\n  var _useState = useState(false),\n    active = _useState[0],\n    setActive = _useState[1];\n  var _useState2 = useState(null),\n    focusItemValue = _useState2[0],\n    setFocusItemValue = _useState2[1];\n  var _useFlattenTreeData = useFlattenTreeData({\n      data: treeData,\n      labelKey: labelKey,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      callback: function callback() {\n        // after flattenData, always trigger re-render\n        forceUpdate();\n      }\n    }),\n    flattenNodes = _useFlattenTreeData.flattenNodes,\n    forceUpdate = _useFlattenTreeData.forceUpdate,\n    formatVirtualizedTreeData = _useFlattenTreeData.formatVirtualizedTreeData;\n  var _useClassNames = useClassNames(classPrefix),\n    prefix = _useClassNames.prefix,\n    merge = _useClassNames.merge;\n  var _useClassNames2 = useClassNames(inline && classPrefix !== 'picker' ? classPrefix : 'tree'),\n    treePrefix = _useClassNames2.prefix,\n    withTreeClassPrefix = _useClassNames2.withClassPrefix;\n  var _useTreeSearch = useTreeSearch({\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      searchKeyword: searchKeyword,\n      data: treeData,\n      searchBy: searchBy,\n      callback: function callback(searchKeyword, _filterData, event) {\n        onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n      }\n    }),\n    filteredData = _useTreeSearch.filteredData,\n    searchKeywordState = _useTreeSearch.searchKeywordState,\n    setSearchKeyword = _useTreeSearch.setSearchKeyword,\n    handleSearch = _useTreeSearch.handleSearch,\n    setFilteredData = _useTreeSearch.setFilteredData;\n  var _useTreeDrag = useTreeDrag(),\n    dragNodeKeys = _useTreeDrag.dragNodeKeys,\n    dragOverNodeKey = _useTreeDrag.dragOverNodeKey,\n    dragNode = _useTreeDrag.dragNode,\n    dropNodePosition = _useTreeDrag.dropNodePosition,\n    setDragNodeKeys = _useTreeDrag.setDragNodeKeys,\n    setDragOverNodeKey = _useTreeDrag.setDragOverNodeKey,\n    setDragNode = _useTreeDrag.setDragNode,\n    setDropNodePosition = _useTreeDrag.setDropNodePosition;\n  var _useTreeNodeRefs = useTreeNodeRefs(),\n    treeNodesRefs = _useTreeNodeRefs.treeNodesRefs,\n    saveTreeNodeRef = _useTreeNodeRefs.saveTreeNodeRef;\n  var activeNode = getTreeActiveNode(flattenNodes, value, valueKey);\n  var getFormattedNodes = function getFormattedNodes(render) {\n    if (virtualized) {\n      return formatVirtualizedTreeData(flattenNodes, filteredData, expandItemValues, {\n        searchKeyword: searchKeywordState\n      }).filter(function (n) {\n        return n.visible;\n      });\n    }\n    return filteredData.map(function (dataItem, index) {\n      return render === null || render === void 0 ? void 0 : render(dataItem, index, 1);\n    });\n  };\n  var focusActiveNode = function focusActiveNode() {\n    if (list.current) {\n      focusToActiveTreeNode({\n        list: list.current,\n        valueKey: valueKey,\n        selector: \".\" + treePrefix('node-active'),\n        activeNode: activeNode,\n        virtualized: virtualized,\n        container: treeView.current,\n        formattedNodes: getFormattedNodes()\n      });\n    }\n  };\n  useEffect(function () {\n    setFilteredData(data, searchKeywordState);\n    setTreeData(data);\n  }, [data, searchKeywordState, setFilteredData, setTreeData]);\n  useEffect(function () {\n    setFilteredData(treeData, searchKeywordState);\n  }, [treeData, searchKeywordState, setFilteredData]);\n  useEffect(function () {\n    if (Array.isArray(controlledExpandItemValues)) {\n      setExpandItemValues(controlledExpandItemValues);\n    }\n  }, [controlledExpandItemValues, setExpandItemValues]);\n  useEffect(function () {\n    setSearchKeyword(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n  }, [searchKeyword, setSearchKeyword]);\n  var getDropData = function getDropData(nodeData) {\n    var options = {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    };\n    return {\n      /** draggingNode */\n      dragNode: dragNode,\n      /** dropNode */\n      dropNode: nodeData,\n      /** dragAndDrop Position type */\n      dropNodePosition: dropNodePosition,\n      createUpdateDataFunction: createUpdateTreeDataFunction({\n        dragNode: dragNode,\n        dropNode: nodeData,\n        dropNodePosition: dropNodePosition\n      }, options)\n    };\n  };\n  var getTreeNodeProps = function getTreeNodeProps(node, layer, index) {\n    var draggingNode = dragNode !== null && dragNode !== void 0 ? dragNode : {};\n    return {\n      as: Component,\n      rtl: rtl,\n      value: node[valueKey],\n      label: node[labelKey],\n      index: index,\n      layer: layer,\n      loading: loadingNodeValues.some(function (item) {\n        return shallowEqual(item, node[valueKey]);\n      }),\n      expand: node.expand,\n      active: shallowEqual(node[valueKey], value),\n      focus: shallowEqual(node[valueKey], focusItemValue),\n      visible: node.visible,\n      draggable: draggable,\n      dragging: shallowEqual(node[valueKey], draggingNode[valueKey]),\n      children: node[childrenKey],\n      nodeData: node,\n      disabled: disabledItemValues.some(function (disabledItem) {\n        return shallowEqual(disabledItem, node[valueKey]);\n      }),\n      dragOver: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER,\n      dragOverTop: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_TOP,\n      dragOverBottom: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_BOTTOM,\n      onSelect: handleSelect,\n      onDragStart: handleDragStart,\n      onDragEnter: handleDragEnter,\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      onDragEnd: handleDragEnd,\n      onDrop: handleDrop,\n      onExpand: handleExpand,\n      renderTreeNode: renderTreeNode,\n      renderTreeIcon: renderTreeIcon\n    };\n  };\n\n  // TODO-Doma\n  // Replace `getKeyParentMap` with `getParentMap`\n  var itemParentMap = useMemo(function () {\n    return getKeyParentMap(data, function (node) {\n      return node[valueKey];\n    }, function (node) {\n      return node[childrenKey];\n    });\n  }, [childrenKey, data, valueKey]);\n  var handleSelect = useEventCallback(function (nodeData, event) {\n    var _target$current, _trigger$current, _trigger$current$clos;\n    if (!nodeData) {\n      return;\n    }\n    var nodeValue = nodeData[valueKey];\n    if (!isControlled) {\n      setValue(nodeValue);\n    }\n    setFocusItemValue(nodeData[valueKey]);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nodeValue, event);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(nodeData, nodeValue, event);\n    onSelectItem === null || onSelectItem === void 0 ? void 0 : onSelectItem(nodeData, getPathTowardsItem(nodeData, function (item) {\n      return itemParentMap.get(item[valueKey]);\n    }));\n    (_target$current = target.current) === null || _target$current === void 0 ? void 0 : _target$current.focus();\n    (_trigger$current = trigger.current) === null || _trigger$current === void 0 ? void 0 : (_trigger$current$clos = _trigger$current.close) === null || _trigger$current$clos === void 0 ? void 0 : _trigger$current$clos.call(_trigger$current);\n  });\n  var handleExpand = useEventCallback(function (node) {\n    var nextExpandItemValues = toggleExpand({\n      node: node,\n      isExpand: !node.expand,\n      expandItemValues: expandItemValues,\n      valueKey: valueKey\n    });\n    setExpandItemValues(nextExpandItemValues);\n    onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    }));\n    if (_isFunction(getChildren) && !node.expand && Array.isArray(node[childrenKey]) && node[childrenKey].length === 0) {\n      loadChildren(node, getChildren);\n    }\n  });\n  var handleDragStart = useEventCallback(function (nodeData, event) {\n    if (draggable) {\n      var _event$dataTransfer;\n      var dragMoverNode = createDragPreview(stringifyTreeNodeLabel(nodeData[labelKey]), treePrefix('drag-preview'));\n      (_event$dataTransfer = event.dataTransfer) === null || _event$dataTransfer === void 0 ? void 0 : _event$dataTransfer.setDragImage(dragMoverNode, 0, 0);\n      setDragNodeKeys(getDragNodeKeys(nodeData, childrenKey, valueKey));\n      setDragNode(flattenNodes[nodeData.refKey]);\n      onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(nodeData, event);\n    }\n  });\n  var handleDragEnter = useEventCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      return;\n    }\n    if (dragNode) {\n      setDragOverNodeKey(nodeData[valueKey]);\n      setDropNodePosition(calDropNodePosition(event, treeNodesRefs[nodeData.refKey]));\n    }\n    onDragEnter === null || onDragEnter === void 0 ? void 0 : onDragEnter(nodeData, event);\n  });\n  var handleDragOver = useEventCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      event.dataTransfer.dropEffect = 'none';\n      return;\n    }\n    if (dragNode && shallowEqual(nodeData[valueKey], dragOverNodeKey)) {\n      var lastDropNodePosition = calDropNodePosition(event, treeNodesRefs[nodeData.refKey]);\n      if (lastDropNodePosition === dropNodePosition) return;\n      setDropNodePosition(lastDropNodePosition);\n    }\n    onDragOver === null || onDragOver === void 0 ? void 0 : onDragOver(nodeData, event);\n  });\n  var handleDragLeave = useEventCallback(function (nodeData, event) {\n    onDragLeave === null || onDragLeave === void 0 ? void 0 : onDragLeave(nodeData, event);\n  });\n  var handleDragEnd = useEventCallback(function (nodeData, event) {\n    removeDragPreview();\n    setDragNode(null);\n    setDragNodeKeys([]);\n    setDragOverNodeKey(null);\n    onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(nodeData, event);\n  });\n  var handleDrop = useEventCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      console.error('Cannot drag a node to itself and its children');\n    } else {\n      var dropData = getDropData(nodeData);\n      onDrop === null || onDrop === void 0 ? void 0 : onDrop(dropData, event);\n    }\n    removeDragPreview();\n    setDragNode(null);\n    setDragNodeKeys([]);\n    setDragOverNodeKey(null);\n  });\n  var handleOpen = useEventCallback(function () {\n    var _trigger$current2, _trigger$current2$ope;\n    (_trigger$current2 = trigger.current) === null || _trigger$current2 === void 0 ? void 0 : (_trigger$current2$ope = _trigger$current2.open) === null || _trigger$current2$ope === void 0 ? void 0 : _trigger$current2$ope.call(_trigger$current2);\n    focusActiveNode();\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  });\n  var handleClose = useEventCallback(function () {\n    var _trigger$current3, _trigger$current3$clo, _target$current2;\n    (_trigger$current3 = trigger.current) === null || _trigger$current3 === void 0 ? void 0 : (_trigger$current3$clo = _trigger$current3.close) === null || _trigger$current3$clo === void 0 ? void 0 : _trigger$current3$clo.call(_trigger$current3);\n    setSearchKeyword('');\n    setActive(false);\n    setFocusItemValue(activeNode === null || activeNode === void 0 ? void 0 : activeNode[valueKey]);\n    /**\n     * when using keyboard toggle picker, should refocus on PickerToggle Component after close picker menu\n     */\n    (_target$current2 = target.current) === null || _target$current2 === void 0 ? void 0 : _target$current2.focus();\n  });\n  var handleFocusItem = useEventCallback(function (key) {\n    var focusableItems = getFocusableItems(filteredData, {\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      expandItemValues: expandItemValues\n    }, isSearching(searchKeywordState));\n    var selector = \".\" + treePrefix('node-label');\n    var focusProps = {\n      focusItemValue: focusItemValue,\n      focusableItems: focusableItems,\n      treeNodesRefs: treeNodesRefs,\n      selector: selector,\n      valueKey: valueKey,\n      callback: function callback(nextFocusItemValue) {\n        setFocusItemValue(nextFocusItemValue);\n      }\n    };\n    if (key === KEY_VALUES.DOWN) {\n      focusNextItem(focusProps);\n      return;\n    }\n    if (key === KEY_VALUES.UP) {\n      focusPreviousItem(focusProps);\n    }\n  });\n  var handleLeftArrow = useEventCallback(function () {\n    if (_isNil(focusItemValue)) return;\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    leftArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      onExpand: handleExpand,\n      childrenKey: childrenKey,\n      onFocusItem: function onFocusItem() {\n        var _focusItem$parent, _focusItem$parent2;\n        setFocusItemValue(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey]);\n        focusTreeNode(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent2 = focusItem.parent) === null || _focusItem$parent2 === void 0 ? void 0 : _focusItem$parent2.refKey, treeNodesRefs, \".\" + treePrefix('node-label'));\n      }\n    });\n  });\n  var handleRightArrow = useEventCallback(function () {\n    if (_isNil(focusItemValue)) return;\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    rightArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      childrenKey: childrenKey,\n      onExpand: handleExpand,\n      onFocusItem: function onFocusItem() {\n        handleFocusItem(KEY_VALUES.DOWN);\n      }\n    });\n  });\n  var selectActiveItem = useEventCallback(function (event) {\n    if (_isNil(focusItemValue)) return;\n    var activeItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    handleSelect(activeItem, event);\n  });\n  var handleClean = useEventCallback(function (event) {\n    var nullValue = null;\n    var target = event.target;\n    // exclude searchbox\n    if (target.matches('input[role=\"searchbox\"]') || disabled || !cleanable) {\n      return;\n    }\n    if (!isControlled) {\n      setValue(null);\n    }\n    onChange === null || onChange === void 0 ? void 0 : onChange(nullValue, event);\n  });\n  var onPickerKeydown = useToggleKeyDownEvent(_extends({\n    toggle: !activeNode || !active,\n    trigger: trigger,\n    target: target,\n    overlay: overlay,\n    searchInput: searchInput,\n    active: active,\n    onExit: handleClean,\n    onClose: handleClose,\n    onMenuKeyDown: function onMenuKeyDown(event) {\n      _onMenuKeyDown(event, {\n        down: function down() {\n          return handleFocusItem(KEY_VALUES.DOWN);\n        },\n        up: function up() {\n          return handleFocusItem(KEY_VALUES.UP);\n        },\n        left: rtl ? handleRightArrow : handleLeftArrow,\n        right: rtl ? handleLeftArrow : handleRightArrow,\n        enter: selectActiveItem,\n        del: handleClean\n      });\n    }\n  }, rest));\n  var handleTreeKeyDown = useEventCallback(function (event) {\n    if (!treeView.current) {\n      return;\n    }\n    _onMenuKeyDown(event, {\n      down: function down() {\n        return handleFocusItem(KEY_VALUES.DOWN);\n      },\n      up: function up() {\n        return handleFocusItem(KEY_VALUES.UP);\n      },\n      left: rtl ? handleRightArrow : handleLeftArrow,\n      right: rtl ? handleLeftArrow : handleRightArrow,\n      enter: selectActiveItem\n    });\n  });\n  var renderNode = function renderNode(node, index, layer) {\n    if (!node.visible) {\n      return null;\n    }\n    var children = node[childrenKey];\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    var visibleChildren = _isUndefined(searchKeywordState) || searchKeywordState.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      expand: expand\n    }), layer, index), {\n      hasChildren: visibleChildren\n    });\n    if (nodeProps.hasChildren) {\n      var _merge;\n      layer += 1;\n      var openClass = treePrefix('open');\n      var childrenClass = merge(treePrefix('node-children'), (_merge = {}, _merge[openClass] = expand && visibleChildren, _merge));\n      var nodes = children || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: childrenClass,\n        key: node[valueKey]\n      }, /*#__PURE__*/React.createElement(TreeNode, _extends({}, nodeProps, {\n        ref: function ref(_ref) {\n          return saveTreeNodeRef(_ref, node.refKey);\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: treePrefix('group'),\n        role: \"group\"\n      }, nodes.map(function (child, i) {\n        return renderNode(child, i, layer);\n      }), showIndentLine && /*#__PURE__*/React.createElement(\"span\", {\n        className: treePrefix('indent-line'),\n        style: getTreeNodeIndent(rtl, layer - 1, true)\n      })));\n    }\n    return /*#__PURE__*/React.createElement(TreeNode, _extends({\n      ref: function ref(_ref2) {\n        return saveTreeNodeRef(_ref2, node.refKey);\n      },\n      key: node[valueKey]\n    }, nodeProps));\n  };\n  var renderVirtualListNode = function renderVirtualListNode(_ref3) {\n    var index = _ref3.index,\n      style = _ref3.style,\n      data = _ref3.data;\n    var node = data[index];\n    var layer = node.layer,\n      visible = node.visible;\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    if (!node.visible) {\n      return null;\n    }\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      expand: expand\n    }), layer), {\n      style: style,\n      hasChildren: node.hasChildren\n    });\n    return visible && /*#__PURE__*/React.createElement(TreeNode, _extends({\n      ref: function ref(_ref4) {\n        return saveTreeNodeRef(_ref4, node.refKey);\n      }\n    }, nodeProps));\n  };\n  var renderTree = function renderTree() {\n    var _merge2;\n    var classes = merge(withTreeClassPrefix({\n      virtualized: virtualized\n    }), (_merge2 = {}, _merge2[className !== null && className !== void 0 ? className : ''] = inline, _merge2));\n    var formattedNodes = getFormattedNodes(renderNode);\n    var treeViewProps = {\n      ref: treeView\n    };\n    if (inline) {\n      treeViewProps = _extends({\n        ref: root,\n        style: _extends({\n          height: height\n        }, style),\n        onKeyDown: handleTreeKeyDown\n      }, rest);\n    }\n    return /*#__PURE__*/React.createElement(TreeView, _extends({}, treeViewProps, {\n      treeRootClassName: treePrefix('root'),\n      className: classes\n    }), virtualized ? /*#__PURE__*/React.createElement(AutoSizer, {\n      defaultHeight: inline ? height : menuMaxHeight,\n      style: {\n        width: 'auto',\n        height: 'auto'\n      }\n    }, function (_ref5) {\n      var height = _ref5.height;\n      return /*#__PURE__*/React.createElement(List, _extends({\n        ref: list,\n        height: height,\n        itemSize: itemSize,\n        itemCount: formattedNodes.length,\n        itemData: formattedNodes\n      }, listProps), renderVirtualListNode);\n    }) : formattedNodes);\n  };\n  var renderTreeView = function renderTreeView(positionProps, speakerRef) {\n    var left = positionProps.left,\n      top = positionProps.top,\n      className = positionProps.className;\n    var classes = merge(className, menuClassName, prefix('tree-menu'));\n    var mergedMenuStyle = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n    return /*#__PURE__*/React.createElement(PickerPopup, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: mergedMenuStyle,\n      ref: mergeRefs(overlay, speakerRef),\n      onKeyDown: onPickerKeydown,\n      target: trigger\n    }, searchable ? /*#__PURE__*/React.createElement(SearchBox, {\n      placeholder: locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeywordState,\n      inputRef: searchInput\n    }) : null, renderMenu ? renderMenu(renderTree()) : renderTree(), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n  var hasValidValue = !_isNil(activeNode) || !_isNil(value) && _isFunction(renderValue);\n  var selectedElement = placeholder;\n  if (hasValidValue) {\n    var node = activeNode !== null && activeNode !== void 0 ? activeNode : {};\n    selectedElement = node[labelKey];\n    if (_isFunction(renderValue) && value) {\n      selectedElement = renderValue(value, node, selectedElement);\n      if (_isNil(selectedElement)) {\n        hasValidValue = false;\n      }\n    }\n  }\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n      classPrefix: classPrefix,\n      appearance: appearance,\n      hasValue: hasValidValue,\n      name: 'tree',\n      cleanable: cleanable\n    })),\n    classes = _usePickerClassName[0],\n    usedClassNamePropKeys = _usePickerClassName[1];\n  if (inline) {\n    return renderTree();\n  }\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    id: id,\n    popupType: \"tree\",\n    pickerProps: _pick(props, pickTriggerPropKeys),\n    ref: trigger,\n    placement: placement,\n    onEnter: handleOpen,\n    onEntered: onEntered,\n    onExit: createChainedFunction(onClose, onExit),\n    onExited: createChainedFunction(handleClose, onExited),\n    speaker: renderTreeView\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style,\n    ref: root\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, _omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys, ['cascade'])), {\n    ref: target,\n    appearance: appearance,\n    onKeyDown: onPickerKeydown,\n    onClean: createChainedFunction(handleClean, onClean),\n    cleanable: cleanable && !disabled,\n    as: toggleAs,\n    disabled: disabled,\n    hasValue: hasValidValue,\n    active: active,\n    placement: placement,\n    inputValue: value,\n    focusItemValue: focusItemValue\n  }), selectedElement || locale.placeholder)));\n});\nTreePicker.displayName = 'TreePicker';\nTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  locale: PropTypes.any,\n  appearance: oneOf(['default', 'subtle']),\n  height: PropTypes.number,\n  draggable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchable: PropTypes.bool,\n  menuAutoWidth: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  defaultExpandAll: PropTypes.bool,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  renderExtraFooter: PropTypes.func,\n  renderDragNode: PropTypes.func,\n  searchBy: PropTypes.func\n});\nexport default TreePicker;","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_isFunction","_isNil","_isUndefined","_omit","_pick","React","useState","useEffect","useContext","useMemo","PropTypes","List","AutoSizer","oneOf","TreeNode","createDragPreview","getKeyParentMap","getPathTowardsItem","getTreeNodeIndent","removeDragPreview","stringifyTreeNodeLabel","createChainedFunction","useClassNames","useCustom","useControlled","useEventCallback","TREE_NODE_DROP_POSITION","KEY_VALUES","mergeRefs","shallowEqual","getExpandWhenSearching","hasVisibleChildren","getDragNodeKeys","calDropNodePosition","createUpdateTreeDataFunction","useTreeDrag","useFlattenTreeData","getTreeActiveNode","getDefaultExpandItemValues","useTreeNodeRefs","useTreeSearch","focusPreviousItem","getFocusableItems","focusNextItem","getActiveItem","toggleExpand","useGetTreeNodeChildren","focusToActiveTreeNode","leftArrowHandler","focusTreeNode","rightArrowHandler","isSearching","PickerToggle","PickerPopup","TreeView","PickerToggleTrigger","createConcatChildrenFunction","usePickerClassName","usePickerRef","onMenuKeyDown","_onMenuKeyDown","listPickerPropTypes","pickTriggerPropKeys","omitTriggerPropKeys","useToggleKeyDownEvent","SearchBox","TreeContext","emptyArray","itemSize","TreePicker","forwardRef","props","ref","_props$as","as","Component","_props$data","data","_props$appearance","appearance","style","showIndentLine","controlledValue","value","overrideLocale","locale","_props$height","height","_props$menuMaxHeight","menuMaxHeight","menuStyle","className","disabled","_props$placement","placement","_props$cleanable","cleanable","_props$searchable","searchable","_props$virtualized","virtualized","_props$classPrefix","classPrefix","defaultValue","placeholder","searchKeyword","menuClassName","_props$menuAutoWidth","menuAutoWidth","searchBy","toggleAs","_props$labelKey","labelKey","_props$valueKey","valueKey","_props$childrenKey","childrenKey","draggable","_props$defaultExpandA","defaultExpandAll","_props$disabledItemVa","disabledItemValues","controlledExpandItemValues","expandItemValues","_props$defaultExpandI","defaultExpandItemValues","id","listProps","getChildren","renderTreeIcon","renderTreeNode","onExit","onExited","onClean","onOpen","onSearch","onSelect","onSelectItem","onChange","onEntered","onClose","onDragEnd","onDragStart","onDragEnter","onDragLeave","onDragOver","onDrop","onExpand","renderExtraFooter","renderMenu","renderValue","rest","_useCustom","rtl","_useContext","inline","_usePickerRef","trigger","root","target","overlay","list","searchInput","treeView","_useControlled","setValue","isControlled","_useGetTreeNodeChildr","treeData","setTreeData","setData","loadingNodeValues","loadChildren","_useControlled2","setExpandItemValues","_useState","active","setActive","_useState2","focusItemValue","setFocusItemValue","_useFlattenTreeData","callback","forceUpdate","flattenNodes","formatVirtualizedTreeData","_useClassNames","prefix","merge","_useClassNames2","treePrefix","withTreeClassPrefix","withClassPrefix","_useTreeSearch","_filterData","event","filteredData","searchKeywordState","setSearchKeyword","handleSearch","setFilteredData","_useTreeDrag","dragNodeKeys","dragOverNodeKey","dragNode","dropNodePosition","setDragNodeKeys","setDragOverNodeKey","setDragNode","setDropNodePosition","_useTreeNodeRefs","treeNodesRefs","saveTreeNodeRef","activeNode","getFormattedNodes","render","filter","n","visible","map","dataItem","index","focusActiveNode","current","selector","container","formattedNodes","Array","isArray","getDropData","nodeData","options","dropNode","createUpdateDataFunction","getTreeNodeProps","node","layer","draggingNode","label","loading","some","item","expand","focus","dragging","children","disabledItem","dragOver","DRAG_OVER","dragOverTop","DRAG_OVER_TOP","dragOverBottom","DRAG_OVER_BOTTOM","handleSelect","handleDragStart","handleDragEnter","handleDragOver","handleDragLeave","handleDragEnd","handleDrop","handleExpand","itemParentMap","_target$current","_trigger$current","_trigger$current$clos","nodeValue","get","close","call","nextExpandItemValues","isExpand","length","_event$dataTransfer","dragMoverNode","dataTransfer","setDragImage","refKey","d","dropEffect","lastDropNodePosition","console","error","dropData","handleOpen","_trigger$current2","_trigger$current2$ope","open","handleClose","_trigger$current3","_trigger$current3$clo","_target$current2","handleFocusItem","key","focusableItems","focusProps","nextFocusItemValue","DOWN","UP","handleLeftArrow","focusItem","includes","onFocusItem","_focusItem$parent","_focusItem$parent2","parent","handleRightArrow","selectActiveItem","activeItem","handleClean","nullValue","matches","onPickerKeydown","toggle","down","up","left","right","enter","del","handleTreeKeyDown","renderNode","visibleChildren","nodeProps","hasChildren","_merge","openClass","childrenClass","nodes","createElement","_ref","role","child","i","_ref2","renderVirtualListNode","_ref3","_ref4","renderTree","_merge2","classes","treeViewProps","onKeyDown","treeRootClassName","defaultHeight","width","_ref5","itemCount","itemData","renderTreeView","positionProps","speakerRef","top","mergedMenuStyle","autoWidth","searchPlaceholder","inputRef","hasValidValue","selectedElement","_usePickerClassName","hasValue","name","usedClassNamePropKeys","popupType","pickerProps","onEnter","speaker","concat","inputValue","displayName","propTypes","any","number","bool","string","array","func","renderDragNode"],"sources":["C:/Users/nsuyk/Desktop/jet-soft-main/jet-soft/node_modules/rsuite/esm/TreePicker/TreePicker.js"],"sourcesContent":["'use client';\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNil from \"lodash/isNil\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { List, AutoSizer } from '../internals/Windowing';\nimport { oneOf } from '../internals/propTypes';\nimport TreeNode from './TreeNode';\nimport { createDragPreview, getKeyParentMap, getPathTowardsItem, getTreeNodeIndent, removeDragPreview, stringifyTreeNodeLabel } from '../utils/treeUtils';\nimport { createChainedFunction, useClassNames, useCustom, useControlled, useEventCallback, TREE_NODE_DROP_POSITION, KEY_VALUES, mergeRefs, shallowEqual } from '../utils';\nimport { getExpandWhenSearching, hasVisibleChildren, getDragNodeKeys, calDropNodePosition, createUpdateTreeDataFunction, useTreeDrag, useFlattenTreeData, getTreeActiveNode, getDefaultExpandItemValues, useTreeNodeRefs, useTreeSearch, focusPreviousItem, getFocusableItems, focusNextItem, getActiveItem, toggleExpand, useGetTreeNodeChildren, focusToActiveTreeNode, leftArrowHandler, focusTreeNode, rightArrowHandler, isSearching } from '../utils/treeUtils';\nimport { PickerToggle, PickerPopup, TreeView, PickerToggleTrigger, createConcatChildrenFunction, usePickerClassName, usePickerRef, onMenuKeyDown as _onMenuKeyDown, listPickerPropTypes, pickTriggerPropKeys, omitTriggerPropKeys, useToggleKeyDownEvent } from '../internals/Picker';\nimport SearchBox from '../internals/SearchBox';\nimport TreeContext from '../Tree/TreeContext';\nvar emptyArray = [];\nvar itemSize = function itemSize() {\n  return 36;\n};\n\n/**\n * The `TreePicker` component is used for selecting single options which are organized in a tree structure.\n *\n * @see https://rsuitejs.com/components/tree-picker/\n */\nvar TreePicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n    Component = _props$as === void 0 ? 'div' : _props$as,\n    _props$data = props.data,\n    data = _props$data === void 0 ? emptyArray : _props$data,\n    _props$appearance = props.appearance,\n    appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n    style = props.style,\n    showIndentLine = props.showIndentLine,\n    controlledValue = props.value,\n    overrideLocale = props.locale,\n    _props$height = props.height,\n    height = _props$height === void 0 ? 360 : _props$height,\n    _props$menuMaxHeight = props.menuMaxHeight,\n    menuMaxHeight = _props$menuMaxHeight === void 0 ? 320 : _props$menuMaxHeight,\n    menuStyle = props.menuStyle,\n    className = props.className,\n    disabled = props.disabled,\n    _props$placement = props.placement,\n    placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n    _props$cleanable = props.cleanable,\n    cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n    _props$searchable = props.searchable,\n    searchable = _props$searchable === void 0 ? true : _props$searchable,\n    _props$virtualized = props.virtualized,\n    virtualized = _props$virtualized === void 0 ? false : _props$virtualized,\n    _props$classPrefix = props.classPrefix,\n    classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n    defaultValue = props.defaultValue,\n    placeholder = props.placeholder,\n    searchKeyword = props.searchKeyword,\n    menuClassName = props.menuClassName,\n    _props$menuAutoWidth = props.menuAutoWidth,\n    menuAutoWidth = _props$menuAutoWidth === void 0 ? true : _props$menuAutoWidth,\n    searchBy = props.searchBy,\n    toggleAs = props.toggleAs,\n    _props$labelKey = props.labelKey,\n    labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n    _props$valueKey = props.valueKey,\n    valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n    _props$childrenKey = props.childrenKey,\n    childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n    draggable = props.draggable,\n    _props$defaultExpandA = props.defaultExpandAll,\n    defaultExpandAll = _props$defaultExpandA === void 0 ? false : _props$defaultExpandA,\n    _props$disabledItemVa = props.disabledItemValues,\n    disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n    controlledExpandItemValues = props.expandItemValues,\n    _props$defaultExpandI = props.defaultExpandItemValues,\n    defaultExpandItemValues = _props$defaultExpandI === void 0 ? emptyArray : _props$defaultExpandI,\n    id = props.id,\n    listProps = props.listProps,\n    getChildren = props.getChildren,\n    renderTreeIcon = props.renderTreeIcon,\n    renderTreeNode = props.renderTreeNode,\n    onExit = props.onExit,\n    onExited = props.onExited,\n    onClean = props.onClean,\n    onOpen = props.onOpen,\n    onSearch = props.onSearch,\n    onSelect = props.onSelect,\n    onSelectItem = props.onSelectItem,\n    onChange = props.onChange,\n    onEntered = props.onEntered,\n    onClose = props.onClose,\n    onDragEnd = props.onDragEnd,\n    onDragStart = props.onDragStart,\n    onDragEnter = props.onDragEnter,\n    onDragLeave = props.onDragLeave,\n    onDragOver = props.onDragOver,\n    onDrop = props.onDrop,\n    onExpand = props.onExpand,\n    renderExtraFooter = props.renderExtraFooter,\n    renderMenu = props.renderMenu,\n    renderValue = props.renderValue,\n    rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"appearance\", \"style\", \"showIndentLine\", \"value\", \"locale\", \"height\", \"menuMaxHeight\", \"menuStyle\", \"className\", \"disabled\", \"placement\", \"cleanable\", \"searchable\", \"virtualized\", \"classPrefix\", \"defaultValue\", \"placeholder\", \"searchKeyword\", \"menuClassName\", \"menuAutoWidth\", \"searchBy\", \"toggleAs\", \"labelKey\", \"valueKey\", \"childrenKey\", \"draggable\", \"defaultExpandAll\", \"disabledItemValues\", \"expandItemValues\", \"defaultExpandItemValues\", \"id\", \"listProps\", \"getChildren\", \"renderTreeIcon\", \"renderTreeNode\", \"onExit\", \"onExited\", \"onClean\", \"onOpen\", \"onSearch\", \"onSelect\", \"onSelectItem\", \"onChange\", \"onEntered\", \"onClose\", \"onDragEnd\", \"onDragStart\", \"onDragEnter\", \"onDragLeave\", \"onDragOver\", \"onDrop\", \"onExpand\", \"renderExtraFooter\", \"renderMenu\", \"renderValue\"]);\n  var _useCustom = useCustom('Picker', overrideLocale),\n    rtl = _useCustom.rtl,\n    locale = _useCustom.locale;\n  var _useContext = useContext(TreeContext),\n    inline = _useContext.inline;\n  var _usePickerRef = usePickerRef(ref, {\n      inline: inline\n    }),\n    trigger = _usePickerRef.trigger,\n    root = _usePickerRef.root,\n    target = _usePickerRef.target,\n    overlay = _usePickerRef.overlay,\n    list = _usePickerRef.list,\n    searchInput = _usePickerRef.searchInput,\n    treeView = _usePickerRef.treeView;\n  var _useControlled = useControlled(controlledValue, defaultValue),\n    value = _useControlled[0],\n    setValue = _useControlled[1],\n    isControlled = _useControlled[2];\n  var _useGetTreeNodeChildr = useGetTreeNodeChildren(data, valueKey, childrenKey),\n    treeData = _useGetTreeNodeChildr.data,\n    setTreeData = _useGetTreeNodeChildr.setData,\n    loadingNodeValues = _useGetTreeNodeChildr.loadingNodeValues,\n    loadChildren = _useGetTreeNodeChildr.loadChildren;\n  var _useControlled2 = useControlled(controlledExpandItemValues, getDefaultExpandItemValues(treeData, {\n      defaultExpandAll: defaultExpandAll,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      defaultExpandItemValues: defaultExpandItemValues\n    })),\n    expandItemValues = _useControlled2[0],\n    setExpandItemValues = _useControlled2[1];\n  var _useState = useState(false),\n    active = _useState[0],\n    setActive = _useState[1];\n  var _useState2 = useState(null),\n    focusItemValue = _useState2[0],\n    setFocusItemValue = _useState2[1];\n  var _useFlattenTreeData = useFlattenTreeData({\n      data: treeData,\n      labelKey: labelKey,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      callback: function callback() {\n        // after flattenData, always trigger re-render\n        forceUpdate();\n      }\n    }),\n    flattenNodes = _useFlattenTreeData.flattenNodes,\n    forceUpdate = _useFlattenTreeData.forceUpdate,\n    formatVirtualizedTreeData = _useFlattenTreeData.formatVirtualizedTreeData;\n  var _useClassNames = useClassNames(classPrefix),\n    prefix = _useClassNames.prefix,\n    merge = _useClassNames.merge;\n  var _useClassNames2 = useClassNames(inline && classPrefix !== 'picker' ? classPrefix : 'tree'),\n    treePrefix = _useClassNames2.prefix,\n    withTreeClassPrefix = _useClassNames2.withClassPrefix;\n  var _useTreeSearch = useTreeSearch({\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      searchKeyword: searchKeyword,\n      data: treeData,\n      searchBy: searchBy,\n      callback: function callback(searchKeyword, _filterData, event) {\n        onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n      }\n    }),\n    filteredData = _useTreeSearch.filteredData,\n    searchKeywordState = _useTreeSearch.searchKeywordState,\n    setSearchKeyword = _useTreeSearch.setSearchKeyword,\n    handleSearch = _useTreeSearch.handleSearch,\n    setFilteredData = _useTreeSearch.setFilteredData;\n  var _useTreeDrag = useTreeDrag(),\n    dragNodeKeys = _useTreeDrag.dragNodeKeys,\n    dragOverNodeKey = _useTreeDrag.dragOverNodeKey,\n    dragNode = _useTreeDrag.dragNode,\n    dropNodePosition = _useTreeDrag.dropNodePosition,\n    setDragNodeKeys = _useTreeDrag.setDragNodeKeys,\n    setDragOverNodeKey = _useTreeDrag.setDragOverNodeKey,\n    setDragNode = _useTreeDrag.setDragNode,\n    setDropNodePosition = _useTreeDrag.setDropNodePosition;\n  var _useTreeNodeRefs = useTreeNodeRefs(),\n    treeNodesRefs = _useTreeNodeRefs.treeNodesRefs,\n    saveTreeNodeRef = _useTreeNodeRefs.saveTreeNodeRef;\n  var activeNode = getTreeActiveNode(flattenNodes, value, valueKey);\n  var getFormattedNodes = function getFormattedNodes(render) {\n    if (virtualized) {\n      return formatVirtualizedTreeData(flattenNodes, filteredData, expandItemValues, {\n        searchKeyword: searchKeywordState\n      }).filter(function (n) {\n        return n.visible;\n      });\n    }\n    return filteredData.map(function (dataItem, index) {\n      return render === null || render === void 0 ? void 0 : render(dataItem, index, 1);\n    });\n  };\n  var focusActiveNode = function focusActiveNode() {\n    if (list.current) {\n      focusToActiveTreeNode({\n        list: list.current,\n        valueKey: valueKey,\n        selector: \".\" + treePrefix('node-active'),\n        activeNode: activeNode,\n        virtualized: virtualized,\n        container: treeView.current,\n        formattedNodes: getFormattedNodes()\n      });\n    }\n  };\n  useEffect(function () {\n    setFilteredData(data, searchKeywordState);\n    setTreeData(data);\n  }, [data, searchKeywordState, setFilteredData, setTreeData]);\n  useEffect(function () {\n    setFilteredData(treeData, searchKeywordState);\n  }, [treeData, searchKeywordState, setFilteredData]);\n  useEffect(function () {\n    if (Array.isArray(controlledExpandItemValues)) {\n      setExpandItemValues(controlledExpandItemValues);\n    }\n  }, [controlledExpandItemValues, setExpandItemValues]);\n  useEffect(function () {\n    setSearchKeyword(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n  }, [searchKeyword, setSearchKeyword]);\n  var getDropData = function getDropData(nodeData) {\n    var options = {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    };\n    return {\n      /** draggingNode */\n      dragNode: dragNode,\n      /** dropNode */\n      dropNode: nodeData,\n      /** dragAndDrop Position type */\n      dropNodePosition: dropNodePosition,\n      createUpdateDataFunction: createUpdateTreeDataFunction({\n        dragNode: dragNode,\n        dropNode: nodeData,\n        dropNodePosition: dropNodePosition\n      }, options)\n    };\n  };\n  var getTreeNodeProps = function getTreeNodeProps(node, layer, index) {\n    var draggingNode = dragNode !== null && dragNode !== void 0 ? dragNode : {};\n    return {\n      as: Component,\n      rtl: rtl,\n      value: node[valueKey],\n      label: node[labelKey],\n      index: index,\n      layer: layer,\n      loading: loadingNodeValues.some(function (item) {\n        return shallowEqual(item, node[valueKey]);\n      }),\n      expand: node.expand,\n      active: shallowEqual(node[valueKey], value),\n      focus: shallowEqual(node[valueKey], focusItemValue),\n      visible: node.visible,\n      draggable: draggable,\n      dragging: shallowEqual(node[valueKey], draggingNode[valueKey]),\n      children: node[childrenKey],\n      nodeData: node,\n      disabled: disabledItemValues.some(function (disabledItem) {\n        return shallowEqual(disabledItem, node[valueKey]);\n      }),\n      dragOver: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER,\n      dragOverTop: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_TOP,\n      dragOverBottom: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_BOTTOM,\n      onSelect: handleSelect,\n      onDragStart: handleDragStart,\n      onDragEnter: handleDragEnter,\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      onDragEnd: handleDragEnd,\n      onDrop: handleDrop,\n      onExpand: handleExpand,\n      renderTreeNode: renderTreeNode,\n      renderTreeIcon: renderTreeIcon\n    };\n  };\n\n  // TODO-Doma\n  // Replace `getKeyParentMap` with `getParentMap`\n  var itemParentMap = useMemo(function () {\n    return getKeyParentMap(data, function (node) {\n      return node[valueKey];\n    }, function (node) {\n      return node[childrenKey];\n    });\n  }, [childrenKey, data, valueKey]);\n  var handleSelect = useEventCallback(function (nodeData, event) {\n    var _target$current, _trigger$current, _trigger$current$clos;\n    if (!nodeData) {\n      return;\n    }\n    var nodeValue = nodeData[valueKey];\n    if (!isControlled) {\n      setValue(nodeValue);\n    }\n    setFocusItemValue(nodeData[valueKey]);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nodeValue, event);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(nodeData, nodeValue, event);\n    onSelectItem === null || onSelectItem === void 0 ? void 0 : onSelectItem(nodeData, getPathTowardsItem(nodeData, function (item) {\n      return itemParentMap.get(item[valueKey]);\n    }));\n    (_target$current = target.current) === null || _target$current === void 0 ? void 0 : _target$current.focus();\n    (_trigger$current = trigger.current) === null || _trigger$current === void 0 ? void 0 : (_trigger$current$clos = _trigger$current.close) === null || _trigger$current$clos === void 0 ? void 0 : _trigger$current$clos.call(_trigger$current);\n  });\n  var handleExpand = useEventCallback(function (node) {\n    var nextExpandItemValues = toggleExpand({\n      node: node,\n      isExpand: !node.expand,\n      expandItemValues: expandItemValues,\n      valueKey: valueKey\n    });\n    setExpandItemValues(nextExpandItemValues);\n    onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    }));\n    if (_isFunction(getChildren) && !node.expand && Array.isArray(node[childrenKey]) && node[childrenKey].length === 0) {\n      loadChildren(node, getChildren);\n    }\n  });\n  var handleDragStart = useEventCallback(function (nodeData, event) {\n    if (draggable) {\n      var _event$dataTransfer;\n      var dragMoverNode = createDragPreview(stringifyTreeNodeLabel(nodeData[labelKey]), treePrefix('drag-preview'));\n      (_event$dataTransfer = event.dataTransfer) === null || _event$dataTransfer === void 0 ? void 0 : _event$dataTransfer.setDragImage(dragMoverNode, 0, 0);\n      setDragNodeKeys(getDragNodeKeys(nodeData, childrenKey, valueKey));\n      setDragNode(flattenNodes[nodeData.refKey]);\n      onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(nodeData, event);\n    }\n  });\n  var handleDragEnter = useEventCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      return;\n    }\n    if (dragNode) {\n      setDragOverNodeKey(nodeData[valueKey]);\n      setDropNodePosition(calDropNodePosition(event, treeNodesRefs[nodeData.refKey]));\n    }\n    onDragEnter === null || onDragEnter === void 0 ? void 0 : onDragEnter(nodeData, event);\n  });\n  var handleDragOver = useEventCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      event.dataTransfer.dropEffect = 'none';\n      return;\n    }\n    if (dragNode && shallowEqual(nodeData[valueKey], dragOverNodeKey)) {\n      var lastDropNodePosition = calDropNodePosition(event, treeNodesRefs[nodeData.refKey]);\n      if (lastDropNodePosition === dropNodePosition) return;\n      setDropNodePosition(lastDropNodePosition);\n    }\n    onDragOver === null || onDragOver === void 0 ? void 0 : onDragOver(nodeData, event);\n  });\n  var handleDragLeave = useEventCallback(function (nodeData, event) {\n    onDragLeave === null || onDragLeave === void 0 ? void 0 : onDragLeave(nodeData, event);\n  });\n  var handleDragEnd = useEventCallback(function (nodeData, event) {\n    removeDragPreview();\n    setDragNode(null);\n    setDragNodeKeys([]);\n    setDragOverNodeKey(null);\n    onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(nodeData, event);\n  });\n  var handleDrop = useEventCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      console.error('Cannot drag a node to itself and its children');\n    } else {\n      var dropData = getDropData(nodeData);\n      onDrop === null || onDrop === void 0 ? void 0 : onDrop(dropData, event);\n    }\n    removeDragPreview();\n    setDragNode(null);\n    setDragNodeKeys([]);\n    setDragOverNodeKey(null);\n  });\n  var handleOpen = useEventCallback(function () {\n    var _trigger$current2, _trigger$current2$ope;\n    (_trigger$current2 = trigger.current) === null || _trigger$current2 === void 0 ? void 0 : (_trigger$current2$ope = _trigger$current2.open) === null || _trigger$current2$ope === void 0 ? void 0 : _trigger$current2$ope.call(_trigger$current2);\n    focusActiveNode();\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  });\n  var handleClose = useEventCallback(function () {\n    var _trigger$current3, _trigger$current3$clo, _target$current2;\n    (_trigger$current3 = trigger.current) === null || _trigger$current3 === void 0 ? void 0 : (_trigger$current3$clo = _trigger$current3.close) === null || _trigger$current3$clo === void 0 ? void 0 : _trigger$current3$clo.call(_trigger$current3);\n    setSearchKeyword('');\n    setActive(false);\n    setFocusItemValue(activeNode === null || activeNode === void 0 ? void 0 : activeNode[valueKey]);\n    /**\n     * when using keyboard toggle picker, should refocus on PickerToggle Component after close picker menu\n     */\n    (_target$current2 = target.current) === null || _target$current2 === void 0 ? void 0 : _target$current2.focus();\n  });\n  var handleFocusItem = useEventCallback(function (key) {\n    var focusableItems = getFocusableItems(filteredData, {\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      expandItemValues: expandItemValues\n    }, isSearching(searchKeywordState));\n    var selector = \".\" + treePrefix('node-label');\n    var focusProps = {\n      focusItemValue: focusItemValue,\n      focusableItems: focusableItems,\n      treeNodesRefs: treeNodesRefs,\n      selector: selector,\n      valueKey: valueKey,\n      callback: function callback(nextFocusItemValue) {\n        setFocusItemValue(nextFocusItemValue);\n      }\n    };\n    if (key === KEY_VALUES.DOWN) {\n      focusNextItem(focusProps);\n      return;\n    }\n    if (key === KEY_VALUES.UP) {\n      focusPreviousItem(focusProps);\n    }\n  });\n  var handleLeftArrow = useEventCallback(function () {\n    if (_isNil(focusItemValue)) return;\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    leftArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      onExpand: handleExpand,\n      childrenKey: childrenKey,\n      onFocusItem: function onFocusItem() {\n        var _focusItem$parent, _focusItem$parent2;\n        setFocusItemValue(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey]);\n        focusTreeNode(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent2 = focusItem.parent) === null || _focusItem$parent2 === void 0 ? void 0 : _focusItem$parent2.refKey, treeNodesRefs, \".\" + treePrefix('node-label'));\n      }\n    });\n  });\n  var handleRightArrow = useEventCallback(function () {\n    if (_isNil(focusItemValue)) return;\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    rightArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      childrenKey: childrenKey,\n      onExpand: handleExpand,\n      onFocusItem: function onFocusItem() {\n        handleFocusItem(KEY_VALUES.DOWN);\n      }\n    });\n  });\n  var selectActiveItem = useEventCallback(function (event) {\n    if (_isNil(focusItemValue)) return;\n    var activeItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    handleSelect(activeItem, event);\n  });\n  var handleClean = useEventCallback(function (event) {\n    var nullValue = null;\n    var target = event.target;\n    // exclude searchbox\n    if (target.matches('input[role=\"searchbox\"]') || disabled || !cleanable) {\n      return;\n    }\n    if (!isControlled) {\n      setValue(null);\n    }\n    onChange === null || onChange === void 0 ? void 0 : onChange(nullValue, event);\n  });\n  var onPickerKeydown = useToggleKeyDownEvent(_extends({\n    toggle: !activeNode || !active,\n    trigger: trigger,\n    target: target,\n    overlay: overlay,\n    searchInput: searchInput,\n    active: active,\n    onExit: handleClean,\n    onClose: handleClose,\n    onMenuKeyDown: function onMenuKeyDown(event) {\n      _onMenuKeyDown(event, {\n        down: function down() {\n          return handleFocusItem(KEY_VALUES.DOWN);\n        },\n        up: function up() {\n          return handleFocusItem(KEY_VALUES.UP);\n        },\n        left: rtl ? handleRightArrow : handleLeftArrow,\n        right: rtl ? handleLeftArrow : handleRightArrow,\n        enter: selectActiveItem,\n        del: handleClean\n      });\n    }\n  }, rest));\n  var handleTreeKeyDown = useEventCallback(function (event) {\n    if (!treeView.current) {\n      return;\n    }\n    _onMenuKeyDown(event, {\n      down: function down() {\n        return handleFocusItem(KEY_VALUES.DOWN);\n      },\n      up: function up() {\n        return handleFocusItem(KEY_VALUES.UP);\n      },\n      left: rtl ? handleRightArrow : handleLeftArrow,\n      right: rtl ? handleLeftArrow : handleRightArrow,\n      enter: selectActiveItem\n    });\n  });\n  var renderNode = function renderNode(node, index, layer) {\n    if (!node.visible) {\n      return null;\n    }\n    var children = node[childrenKey];\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    var visibleChildren = _isUndefined(searchKeywordState) || searchKeywordState.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      expand: expand\n    }), layer, index), {\n      hasChildren: visibleChildren\n    });\n    if (nodeProps.hasChildren) {\n      var _merge;\n      layer += 1;\n      var openClass = treePrefix('open');\n      var childrenClass = merge(treePrefix('node-children'), (_merge = {}, _merge[openClass] = expand && visibleChildren, _merge));\n      var nodes = children || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: childrenClass,\n        key: node[valueKey]\n      }, /*#__PURE__*/React.createElement(TreeNode, _extends({}, nodeProps, {\n        ref: function ref(_ref) {\n          return saveTreeNodeRef(_ref, node.refKey);\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: treePrefix('group'),\n        role: \"group\"\n      }, nodes.map(function (child, i) {\n        return renderNode(child, i, layer);\n      }), showIndentLine && /*#__PURE__*/React.createElement(\"span\", {\n        className: treePrefix('indent-line'),\n        style: getTreeNodeIndent(rtl, layer - 1, true)\n      })));\n    }\n    return /*#__PURE__*/React.createElement(TreeNode, _extends({\n      ref: function ref(_ref2) {\n        return saveTreeNodeRef(_ref2, node.refKey);\n      },\n      key: node[valueKey]\n    }, nodeProps));\n  };\n  var renderVirtualListNode = function renderVirtualListNode(_ref3) {\n    var index = _ref3.index,\n      style = _ref3.style,\n      data = _ref3.data;\n    var node = data[index];\n    var layer = node.layer,\n      visible = node.visible;\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    if (!node.visible) {\n      return null;\n    }\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      expand: expand\n    }), layer), {\n      style: style,\n      hasChildren: node.hasChildren\n    });\n    return visible && /*#__PURE__*/React.createElement(TreeNode, _extends({\n      ref: function ref(_ref4) {\n        return saveTreeNodeRef(_ref4, node.refKey);\n      }\n    }, nodeProps));\n  };\n  var renderTree = function renderTree() {\n    var _merge2;\n    var classes = merge(withTreeClassPrefix({\n      virtualized: virtualized\n    }), (_merge2 = {}, _merge2[className !== null && className !== void 0 ? className : ''] = inline, _merge2));\n    var formattedNodes = getFormattedNodes(renderNode);\n    var treeViewProps = {\n      ref: treeView\n    };\n    if (inline) {\n      treeViewProps = _extends({\n        ref: root,\n        style: _extends({\n          height: height\n        }, style),\n        onKeyDown: handleTreeKeyDown\n      }, rest);\n    }\n    return /*#__PURE__*/React.createElement(TreeView, _extends({}, treeViewProps, {\n      treeRootClassName: treePrefix('root'),\n      className: classes\n    }), virtualized ? /*#__PURE__*/React.createElement(AutoSizer, {\n      defaultHeight: inline ? height : menuMaxHeight,\n      style: {\n        width: 'auto',\n        height: 'auto'\n      }\n    }, function (_ref5) {\n      var height = _ref5.height;\n      return /*#__PURE__*/React.createElement(List, _extends({\n        ref: list,\n        height: height,\n        itemSize: itemSize,\n        itemCount: formattedNodes.length,\n        itemData: formattedNodes\n      }, listProps), renderVirtualListNode);\n    }) : formattedNodes);\n  };\n  var renderTreeView = function renderTreeView(positionProps, speakerRef) {\n    var left = positionProps.left,\n      top = positionProps.top,\n      className = positionProps.className;\n    var classes = merge(className, menuClassName, prefix('tree-menu'));\n    var mergedMenuStyle = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n    return /*#__PURE__*/React.createElement(PickerPopup, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: mergedMenuStyle,\n      ref: mergeRefs(overlay, speakerRef),\n      onKeyDown: onPickerKeydown,\n      target: trigger\n    }, searchable ? /*#__PURE__*/React.createElement(SearchBox, {\n      placeholder: locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeywordState,\n      inputRef: searchInput\n    }) : null, renderMenu ? renderMenu(renderTree()) : renderTree(), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n  var hasValidValue = !_isNil(activeNode) || !_isNil(value) && _isFunction(renderValue);\n  var selectedElement = placeholder;\n  if (hasValidValue) {\n    var node = activeNode !== null && activeNode !== void 0 ? activeNode : {};\n    selectedElement = node[labelKey];\n    if (_isFunction(renderValue) && value) {\n      selectedElement = renderValue(value, node, selectedElement);\n      if (_isNil(selectedElement)) {\n        hasValidValue = false;\n      }\n    }\n  }\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n      classPrefix: classPrefix,\n      appearance: appearance,\n      hasValue: hasValidValue,\n      name: 'tree',\n      cleanable: cleanable\n    })),\n    classes = _usePickerClassName[0],\n    usedClassNamePropKeys = _usePickerClassName[1];\n  if (inline) {\n    return renderTree();\n  }\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    id: id,\n    popupType: \"tree\",\n    pickerProps: _pick(props, pickTriggerPropKeys),\n    ref: trigger,\n    placement: placement,\n    onEnter: handleOpen,\n    onEntered: onEntered,\n    onExit: createChainedFunction(onClose, onExit),\n    onExited: createChainedFunction(handleClose, onExited),\n    speaker: renderTreeView\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style,\n    ref: root\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, _omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys, ['cascade'])), {\n    ref: target,\n    appearance: appearance,\n    onKeyDown: onPickerKeydown,\n    onClean: createChainedFunction(handleClean, onClean),\n    cleanable: cleanable && !disabled,\n    as: toggleAs,\n    disabled: disabled,\n    hasValue: hasValidValue,\n    active: active,\n    placement: placement,\n    inputValue: value,\n    focusItemValue: focusItemValue\n  }), selectedElement || locale.placeholder)));\n});\nTreePicker.displayName = 'TreePicker';\nTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  locale: PropTypes.any,\n  appearance: oneOf(['default', 'subtle']),\n  height: PropTypes.number,\n  draggable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchable: PropTypes.bool,\n  menuAutoWidth: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  defaultExpandAll: PropTypes.bool,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  renderExtraFooter: PropTypes.func,\n  renderDragNode: PropTypes.func,\n  searchBy: PropTypes.func\n});\nexport default TreePicker;"],"mappings":"AAAA,YAAY;;AACZ,OAAOA,QAAQ,MAAM,oCAAoC;AACzD,OAAOC,6BAA6B,MAAM,yDAAyD;AACnG,OAAOC,WAAW,MAAM,mBAAmB;AAC3C,OAAOC,MAAM,MAAM,cAAc;AACjC,OAAOC,YAAY,MAAM,oBAAoB;AAC7C,OAAOC,KAAK,MAAM,aAAa;AAC/B,OAAOC,KAAK,MAAM,aAAa;AAC/B,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,EAAEC,OAAO,QAAQ,OAAO;AACvE,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,IAAI,EAAEC,SAAS,QAAQ,wBAAwB;AACxD,SAASC,KAAK,QAAQ,wBAAwB;AAC9C,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAASC,iBAAiB,EAAEC,eAAe,EAAEC,kBAAkB,EAAEC,iBAAiB,EAAEC,iBAAiB,EAAEC,sBAAsB,QAAQ,oBAAoB;AACzJ,SAASC,qBAAqB,EAAEC,aAAa,EAAEC,SAAS,EAAEC,aAAa,EAAEC,gBAAgB,EAAEC,uBAAuB,EAAEC,UAAU,EAAEC,SAAS,EAAEC,YAAY,QAAQ,UAAU;AACzK,SAASC,sBAAsB,EAAEC,kBAAkB,EAAEC,eAAe,EAAEC,mBAAmB,EAAEC,4BAA4B,EAAEC,WAAW,EAAEC,kBAAkB,EAAEC,iBAAiB,EAAEC,0BAA0B,EAAEC,eAAe,EAAEC,aAAa,EAAEC,iBAAiB,EAAEC,iBAAiB,EAAEC,aAAa,EAAEC,aAAa,EAAEC,YAAY,EAAEC,sBAAsB,EAAEC,qBAAqB,EAAEC,gBAAgB,EAAEC,aAAa,EAAEC,iBAAiB,EAAEC,WAAW,QAAQ,oBAAoB;AACrc,SAASC,YAAY,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,mBAAmB,EAAEC,4BAA4B,EAAEC,kBAAkB,EAAEC,YAAY,EAAEC,aAAa,IAAIC,cAAc,EAAEC,mBAAmB,EAAEC,mBAAmB,EAAEC,mBAAmB,EAAEC,qBAAqB,QAAQ,qBAAqB;AACrR,OAAOC,SAAS,MAAM,wBAAwB;AAC9C,OAAOC,WAAW,MAAM,qBAAqB;AAC7C,IAAIC,UAAU,GAAG,EAAE;AACnB,IAAIC,QAAQ,GAAG,SAASA,QAAQA,CAAA,EAAG;EACjC,OAAO,EAAE;AACX,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,IAAIC,UAAU,GAAG,aAAahE,KAAK,CAACiE,UAAU,CAAC,UAAUC,KAAK,EAAEC,GAAG,EAAE;EACnE,IAAIC,SAAS,GAAGF,KAAK,CAACG,EAAE;IACtBC,SAAS,GAAGF,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,GAAGA,SAAS;IACpDG,WAAW,GAAGL,KAAK,CAACM,IAAI;IACxBA,IAAI,GAAGD,WAAW,KAAK,KAAK,CAAC,GAAGT,UAAU,GAAGS,WAAW;IACxDE,iBAAiB,GAAGP,KAAK,CAACQ,UAAU;IACpCA,UAAU,GAAGD,iBAAiB,KAAK,KAAK,CAAC,GAAG,SAAS,GAAGA,iBAAiB;IACzEE,KAAK,GAAGT,KAAK,CAACS,KAAK;IACnBC,cAAc,GAAGV,KAAK,CAACU,cAAc;IACrCC,eAAe,GAAGX,KAAK,CAACY,KAAK;IAC7BC,cAAc,GAAGb,KAAK,CAACc,MAAM;IAC7BC,aAAa,GAAGf,KAAK,CAACgB,MAAM;IAC5BA,MAAM,GAAGD,aAAa,KAAK,KAAK,CAAC,GAAG,GAAG,GAAGA,aAAa;IACvDE,oBAAoB,GAAGjB,KAAK,CAACkB,aAAa;IAC1CA,aAAa,GAAGD,oBAAoB,KAAK,KAAK,CAAC,GAAG,GAAG,GAAGA,oBAAoB;IAC5EE,SAAS,GAAGnB,KAAK,CAACmB,SAAS;IAC3BC,SAAS,GAAGpB,KAAK,CAACoB,SAAS;IAC3BC,QAAQ,GAAGrB,KAAK,CAACqB,QAAQ;IACzBC,gBAAgB,GAAGtB,KAAK,CAACuB,SAAS;IAClCA,SAAS,GAAGD,gBAAgB,KAAK,KAAK,CAAC,GAAG,aAAa,GAAGA,gBAAgB;IAC1EE,gBAAgB,GAAGxB,KAAK,CAACyB,SAAS;IAClCA,SAAS,GAAGD,gBAAgB,KAAK,KAAK,CAAC,GAAG,IAAI,GAAGA,gBAAgB;IACjEE,iBAAiB,GAAG1B,KAAK,CAAC2B,UAAU;IACpCA,UAAU,GAAGD,iBAAiB,KAAK,KAAK,CAAC,GAAG,IAAI,GAAGA,iBAAiB;IACpEE,kBAAkB,GAAG5B,KAAK,CAAC6B,WAAW;IACtCA,WAAW,GAAGD,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,GAAGA,kBAAkB;IACxEE,kBAAkB,GAAG9B,KAAK,CAAC+B,WAAW;IACtCA,WAAW,GAAGD,kBAAkB,KAAK,KAAK,CAAC,GAAG,QAAQ,GAAGA,kBAAkB;IAC3EE,YAAY,GAAGhC,KAAK,CAACgC,YAAY;IACjCC,WAAW,GAAGjC,KAAK,CAACiC,WAAW;IAC/BC,aAAa,GAAGlC,KAAK,CAACkC,aAAa;IACnCC,aAAa,GAAGnC,KAAK,CAACmC,aAAa;IACnCC,oBAAoB,GAAGpC,KAAK,CAACqC,aAAa;IAC1CA,aAAa,GAAGD,oBAAoB,KAAK,KAAK,CAAC,GAAG,IAAI,GAAGA,oBAAoB;IAC7EE,QAAQ,GAAGtC,KAAK,CAACsC,QAAQ;IACzBC,QAAQ,GAAGvC,KAAK,CAACuC,QAAQ;IACzBC,eAAe,GAAGxC,KAAK,CAACyC,QAAQ;IAChCA,QAAQ,GAAGD,eAAe,KAAK,KAAK,CAAC,GAAG,OAAO,GAAGA,eAAe;IACjEE,eAAe,GAAG1C,KAAK,CAAC2C,QAAQ;IAChCA,QAAQ,GAAGD,eAAe,KAAK,KAAK,CAAC,GAAG,OAAO,GAAGA,eAAe;IACjEE,kBAAkB,GAAG5C,KAAK,CAAC6C,WAAW;IACtCA,WAAW,GAAGD,kBAAkB,KAAK,KAAK,CAAC,GAAG,UAAU,GAAGA,kBAAkB;IAC7EE,SAAS,GAAG9C,KAAK,CAAC8C,SAAS;IAC3BC,qBAAqB,GAAG/C,KAAK,CAACgD,gBAAgB;IAC9CA,gBAAgB,GAAGD,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,GAAGA,qBAAqB;IACnFE,qBAAqB,GAAGjD,KAAK,CAACkD,kBAAkB;IAChDA,kBAAkB,GAAGD,qBAAqB,KAAK,KAAK,CAAC,GAAGrD,UAAU,GAAGqD,qBAAqB;IAC1FE,0BAA0B,GAAGnD,KAAK,CAACoD,gBAAgB;IACnDC,qBAAqB,GAAGrD,KAAK,CAACsD,uBAAuB;IACrDA,uBAAuB,GAAGD,qBAAqB,KAAK,KAAK,CAAC,GAAGzD,UAAU,GAAGyD,qBAAqB;IAC/FE,EAAE,GAAGvD,KAAK,CAACuD,EAAE;IACbC,SAAS,GAAGxD,KAAK,CAACwD,SAAS;IAC3BC,WAAW,GAAGzD,KAAK,CAACyD,WAAW;IAC/BC,cAAc,GAAG1D,KAAK,CAAC0D,cAAc;IACrCC,cAAc,GAAG3D,KAAK,CAAC2D,cAAc;IACrCC,MAAM,GAAG5D,KAAK,CAAC4D,MAAM;IACrBC,QAAQ,GAAG7D,KAAK,CAAC6D,QAAQ;IACzBC,OAAO,GAAG9D,KAAK,CAAC8D,OAAO;IACvBC,MAAM,GAAG/D,KAAK,CAAC+D,MAAM;IACrBC,QAAQ,GAAGhE,KAAK,CAACgE,QAAQ;IACzBC,QAAQ,GAAGjE,KAAK,CAACiE,QAAQ;IACzBC,YAAY,GAAGlE,KAAK,CAACkE,YAAY;IACjCC,QAAQ,GAAGnE,KAAK,CAACmE,QAAQ;IACzBC,SAAS,GAAGpE,KAAK,CAACoE,SAAS;IAC3BC,OAAO,GAAGrE,KAAK,CAACqE,OAAO;IACvBC,SAAS,GAAGtE,KAAK,CAACsE,SAAS;IAC3BC,WAAW,GAAGvE,KAAK,CAACuE,WAAW;IAC/BC,WAAW,GAAGxE,KAAK,CAACwE,WAAW;IAC/BC,WAAW,GAAGzE,KAAK,CAACyE,WAAW;IAC/BC,UAAU,GAAG1E,KAAK,CAAC0E,UAAU;IAC7BC,MAAM,GAAG3E,KAAK,CAAC2E,MAAM;IACrBC,QAAQ,GAAG5E,KAAK,CAAC4E,QAAQ;IACzBC,iBAAiB,GAAG7E,KAAK,CAAC6E,iBAAiB;IAC3CC,UAAU,GAAG9E,KAAK,CAAC8E,UAAU;IAC7BC,WAAW,GAAG/E,KAAK,CAAC+E,WAAW;IAC/BC,IAAI,GAAGxJ,6BAA6B,CAACwE,KAAK,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,YAAY,EAAE,OAAO,EAAE,gBAAgB,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,eAAe,EAAE,WAAW,EAAE,WAAW,EAAE,UAAU,EAAE,WAAW,EAAE,WAAW,EAAE,YAAY,EAAE,aAAa,EAAE,aAAa,EAAE,cAAc,EAAE,aAAa,EAAE,eAAe,EAAE,eAAe,EAAE,eAAe,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,aAAa,EAAE,WAAW,EAAE,kBAAkB,EAAE,oBAAoB,EAAE,kBAAkB,EAAE,yBAAyB,EAAE,IAAI,EAAE,WAAW,EAAE,aAAa,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,QAAQ,EAAE,UAAU,EAAE,SAAS,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE,cAAc,EAAE,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,WAAW,EAAE,aAAa,EAAE,aAAa,EAAE,aAAa,EAAE,YAAY,EAAE,QAAQ,EAAE,UAAU,EAAE,mBAAmB,EAAE,YAAY,EAAE,aAAa,CAAC,CAAC;EACp0B,IAAIiF,UAAU,GAAGjI,SAAS,CAAC,QAAQ,EAAE6D,cAAc,CAAC;IAClDqE,GAAG,GAAGD,UAAU,CAACC,GAAG;IACpBpE,MAAM,GAAGmE,UAAU,CAACnE,MAAM;EAC5B,IAAIqE,WAAW,GAAGlJ,UAAU,CAAC0D,WAAW,CAAC;IACvCyF,MAAM,GAAGD,WAAW,CAACC,MAAM;EAC7B,IAAIC,aAAa,GAAGlG,YAAY,CAACc,GAAG,EAAE;MAClCmF,MAAM,EAAEA;IACV,CAAC,CAAC;IACFE,OAAO,GAAGD,aAAa,CAACC,OAAO;IAC/BC,IAAI,GAAGF,aAAa,CAACE,IAAI;IACzBC,MAAM,GAAGH,aAAa,CAACG,MAAM;IAC7BC,OAAO,GAAGJ,aAAa,CAACI,OAAO;IAC/BC,IAAI,GAAGL,aAAa,CAACK,IAAI;IACzBC,WAAW,GAAGN,aAAa,CAACM,WAAW;IACvCC,QAAQ,GAAGP,aAAa,CAACO,QAAQ;EACnC,IAAIC,cAAc,GAAG5I,aAAa,CAAC0D,eAAe,EAAEqB,YAAY,CAAC;IAC/DpB,KAAK,GAAGiF,cAAc,CAAC,CAAC,CAAC;IACzBC,QAAQ,GAAGD,cAAc,CAAC,CAAC,CAAC;IAC5BE,YAAY,GAAGF,cAAc,CAAC,CAAC,CAAC;EAClC,IAAIG,qBAAqB,GAAGzH,sBAAsB,CAAC+B,IAAI,EAAEqC,QAAQ,EAAEE,WAAW,CAAC;IAC7EoD,QAAQ,GAAGD,qBAAqB,CAAC1F,IAAI;IACrC4F,WAAW,GAAGF,qBAAqB,CAACG,OAAO;IAC3CC,iBAAiB,GAAGJ,qBAAqB,CAACI,iBAAiB;IAC3DC,YAAY,GAAGL,qBAAqB,CAACK,YAAY;EACnD,IAAIC,eAAe,GAAGrJ,aAAa,CAACkG,0BAA0B,EAAEpF,0BAA0B,CAACkI,QAAQ,EAAE;MACjGjD,gBAAgB,EAAEA,gBAAgB;MAClCL,QAAQ,EAAEA,QAAQ;MAClBE,WAAW,EAAEA,WAAW;MACxBS,uBAAuB,EAAEA;IAC3B,CAAC,CAAC,CAAC;IACHF,gBAAgB,GAAGkD,eAAe,CAAC,CAAC,CAAC;IACrCC,mBAAmB,GAAGD,eAAe,CAAC,CAAC,CAAC;EAC1C,IAAIE,SAAS,GAAGzK,QAAQ,CAAC,KAAK,CAAC;IAC7B0K,MAAM,GAAGD,SAAS,CAAC,CAAC,CAAC;IACrBE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;EAC1B,IAAIG,UAAU,GAAG5K,QAAQ,CAAC,IAAI,CAAC;IAC7B6K,cAAc,GAAGD,UAAU,CAAC,CAAC,CAAC;IAC9BE,iBAAiB,GAAGF,UAAU,CAAC,CAAC,CAAC;EACnC,IAAIG,mBAAmB,GAAGjJ,kBAAkB,CAAC;MACzCyC,IAAI,EAAE2F,QAAQ;MACdxD,QAAQ,EAAEA,QAAQ;MAClBE,QAAQ,EAAEA,QAAQ;MAClBE,WAAW,EAAEA,WAAW;MACxBkE,QAAQ,EAAE,SAASA,QAAQA,CAAA,EAAG;QAC5B;QACAC,WAAW,CAAC,CAAC;MACf;IACF,CAAC,CAAC;IACFC,YAAY,GAAGH,mBAAmB,CAACG,YAAY;IAC/CD,WAAW,GAAGF,mBAAmB,CAACE,WAAW;IAC7CE,yBAAyB,GAAGJ,mBAAmB,CAACI,yBAAyB;EAC3E,IAAIC,cAAc,GAAGpK,aAAa,CAACgF,WAAW,CAAC;IAC7CqF,MAAM,GAAGD,cAAc,CAACC,MAAM;IAC9BC,KAAK,GAAGF,cAAc,CAACE,KAAK;EAC9B,IAAIC,eAAe,GAAGvK,aAAa,CAACqI,MAAM,IAAIrD,WAAW,KAAK,QAAQ,GAAGA,WAAW,GAAG,MAAM,CAAC;IAC5FwF,UAAU,GAAGD,eAAe,CAACF,MAAM;IACnCI,mBAAmB,GAAGF,eAAe,CAACG,eAAe;EACvD,IAAIC,cAAc,GAAGzJ,aAAa,CAAC;MAC/BwE,QAAQ,EAAEA,QAAQ;MAClBI,WAAW,EAAEA,WAAW;MACxBX,aAAa,EAAEA,aAAa;MAC5B5B,IAAI,EAAE2F,QAAQ;MACd3D,QAAQ,EAAEA,QAAQ;MAClByE,QAAQ,EAAE,SAASA,QAAQA,CAAC7E,aAAa,EAAEyF,WAAW,EAAEC,KAAK,EAAE;QAC7D5D,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAAC9B,aAAa,EAAE0F,KAAK,CAAC;MACpF;IACF,CAAC,CAAC;IACFC,YAAY,GAAGH,cAAc,CAACG,YAAY;IAC1CC,kBAAkB,GAAGJ,cAAc,CAACI,kBAAkB;IACtDC,gBAAgB,GAAGL,cAAc,CAACK,gBAAgB;IAClDC,YAAY,GAAGN,cAAc,CAACM,YAAY;IAC1CC,eAAe,GAAGP,cAAc,CAACO,eAAe;EAClD,IAAIC,YAAY,GAAGtK,WAAW,CAAC,CAAC;IAC9BuK,YAAY,GAAGD,YAAY,CAACC,YAAY;IACxCC,eAAe,GAAGF,YAAY,CAACE,eAAe;IAC9CC,QAAQ,GAAGH,YAAY,CAACG,QAAQ;IAChCC,gBAAgB,GAAGJ,YAAY,CAACI,gBAAgB;IAChDC,eAAe,GAAGL,YAAY,CAACK,eAAe;IAC9CC,kBAAkB,GAAGN,YAAY,CAACM,kBAAkB;IACpDC,WAAW,GAAGP,YAAY,CAACO,WAAW;IACtCC,mBAAmB,GAAGR,YAAY,CAACQ,mBAAmB;EACxD,IAAIC,gBAAgB,GAAG3K,eAAe,CAAC,CAAC;IACtC4K,aAAa,GAAGD,gBAAgB,CAACC,aAAa;IAC9CC,eAAe,GAAGF,gBAAgB,CAACE,eAAe;EACpD,IAAIC,UAAU,GAAGhL,iBAAiB,CAACmJ,YAAY,EAAErG,KAAK,EAAE+B,QAAQ,CAAC;EACjE,IAAIoG,iBAAiB,GAAG,SAASA,iBAAiBA,CAACC,MAAM,EAAE;IACzD,IAAInH,WAAW,EAAE;MACf,OAAOqF,yBAAyB,CAACD,YAAY,EAAEY,YAAY,EAAEzE,gBAAgB,EAAE;QAC7ElB,aAAa,EAAE4F;MACjB,CAAC,CAAC,CAACmB,MAAM,CAAC,UAAUC,CAAC,EAAE;QACrB,OAAOA,CAAC,CAACC,OAAO;MAClB,CAAC,CAAC;IACJ;IACA,OAAOtB,YAAY,CAACuB,GAAG,CAAC,UAAUC,QAAQ,EAAEC,KAAK,EAAE;MACjD,OAAON,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACK,QAAQ,EAAEC,KAAK,EAAE,CAAC,CAAC;IACnF,CAAC,CAAC;EACJ,CAAC;EACD,IAAIC,eAAe,GAAG,SAASA,eAAeA,CAAA,EAAG;IAC/C,IAAI7D,IAAI,CAAC8D,OAAO,EAAE;MAChBhL,qBAAqB,CAAC;QACpBkH,IAAI,EAAEA,IAAI,CAAC8D,OAAO;QAClB7G,QAAQ,EAAEA,QAAQ;QAClB8G,QAAQ,EAAE,GAAG,GAAGlC,UAAU,CAAC,aAAa,CAAC;QACzCuB,UAAU,EAAEA,UAAU;QACtBjH,WAAW,EAAEA,WAAW;QACxB6H,SAAS,EAAE9D,QAAQ,CAAC4D,OAAO;QAC3BG,cAAc,EAAEZ,iBAAiB,CAAC;MACpC,CAAC,CAAC;IACJ;EACF,CAAC;EACD/M,SAAS,CAAC,YAAY;IACpBiM,eAAe,CAAC3H,IAAI,EAAEwH,kBAAkB,CAAC;IACzC5B,WAAW,CAAC5F,IAAI,CAAC;EACnB,CAAC,EAAE,CAACA,IAAI,EAAEwH,kBAAkB,EAAEG,eAAe,EAAE/B,WAAW,CAAC,CAAC;EAC5DlK,SAAS,CAAC,YAAY;IACpBiM,eAAe,CAAChC,QAAQ,EAAE6B,kBAAkB,CAAC;EAC/C,CAAC,EAAE,CAAC7B,QAAQ,EAAE6B,kBAAkB,EAAEG,eAAe,CAAC,CAAC;EACnDjM,SAAS,CAAC,YAAY;IACpB,IAAI4N,KAAK,CAACC,OAAO,CAAC1G,0BAA0B,CAAC,EAAE;MAC7CoD,mBAAmB,CAACpD,0BAA0B,CAAC;IACjD;EACF,CAAC,EAAE,CAACA,0BAA0B,EAAEoD,mBAAmB,CAAC,CAAC;EACrDvK,SAAS,CAAC,YAAY;IACpB+L,gBAAgB,CAAC7F,aAAa,KAAK,IAAI,IAAIA,aAAa,KAAK,KAAK,CAAC,GAAGA,aAAa,GAAG,EAAE,CAAC;EAC3F,CAAC,EAAE,CAACA,aAAa,EAAE6F,gBAAgB,CAAC,CAAC;EACrC,IAAI+B,WAAW,GAAG,SAASA,WAAWA,CAACC,QAAQ,EAAE;IAC/C,IAAIC,OAAO,GAAG;MACZrH,QAAQ,EAAEA,QAAQ;MAClBE,WAAW,EAAEA;IACf,CAAC;IACD,OAAO;MACL;MACAwF,QAAQ,EAAEA,QAAQ;MAClB;MACA4B,QAAQ,EAAEF,QAAQ;MAClB;MACAzB,gBAAgB,EAAEA,gBAAgB;MAClC4B,wBAAwB,EAAEvM,4BAA4B,CAAC;QACrD0K,QAAQ,EAAEA,QAAQ;QAClB4B,QAAQ,EAAEF,QAAQ;QAClBzB,gBAAgB,EAAEA;MACpB,CAAC,EAAE0B,OAAO;IACZ,CAAC;EACH,CAAC;EACD,IAAIG,gBAAgB,GAAG,SAASA,gBAAgBA,CAACC,IAAI,EAAEC,KAAK,EAAEf,KAAK,EAAE;IACnE,IAAIgB,YAAY,GAAGjC,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAGA,QAAQ,GAAG,CAAC,CAAC;IAC3E,OAAO;MACLlI,EAAE,EAAEC,SAAS;MACb8E,GAAG,EAAEA,GAAG;MACRtE,KAAK,EAAEwJ,IAAI,CAACzH,QAAQ,CAAC;MACrB4H,KAAK,EAAEH,IAAI,CAAC3H,QAAQ,CAAC;MACrB6G,KAAK,EAAEA,KAAK;MACZe,KAAK,EAAEA,KAAK;MACZG,OAAO,EAAEpE,iBAAiB,CAACqE,IAAI,CAAC,UAAUC,IAAI,EAAE;QAC9C,OAAOpN,YAAY,CAACoN,IAAI,EAAEN,IAAI,CAACzH,QAAQ,CAAC,CAAC;MAC3C,CAAC,CAAC;MACFgI,MAAM,EAAEP,IAAI,CAACO,MAAM;MACnBlE,MAAM,EAAEnJ,YAAY,CAAC8M,IAAI,CAACzH,QAAQ,CAAC,EAAE/B,KAAK,CAAC;MAC3CgK,KAAK,EAAEtN,YAAY,CAAC8M,IAAI,CAACzH,QAAQ,CAAC,EAAEiE,cAAc,CAAC;MACnDuC,OAAO,EAAEiB,IAAI,CAACjB,OAAO;MACrBrG,SAAS,EAAEA,SAAS;MACpB+H,QAAQ,EAAEvN,YAAY,CAAC8M,IAAI,CAACzH,QAAQ,CAAC,EAAE2H,YAAY,CAAC3H,QAAQ,CAAC,CAAC;MAC9DmI,QAAQ,EAAEV,IAAI,CAACvH,WAAW,CAAC;MAC3BkH,QAAQ,EAAEK,IAAI;MACd/I,QAAQ,EAAE6B,kBAAkB,CAACuH,IAAI,CAAC,UAAUM,YAAY,EAAE;QACxD,OAAOzN,YAAY,CAACyN,YAAY,EAAEX,IAAI,CAACzH,QAAQ,CAAC,CAAC;MACnD,CAAC,CAAC;MACFqI,QAAQ,EAAE1N,YAAY,CAAC8M,IAAI,CAACzH,QAAQ,CAAC,EAAEyF,eAAe,CAAC,IAAIE,gBAAgB,KAAKnL,uBAAuB,CAAC8N,SAAS;MACjHC,WAAW,EAAE5N,YAAY,CAAC8M,IAAI,CAACzH,QAAQ,CAAC,EAAEyF,eAAe,CAAC,IAAIE,gBAAgB,KAAKnL,uBAAuB,CAACgO,aAAa;MACxHC,cAAc,EAAE9N,YAAY,CAAC8M,IAAI,CAACzH,QAAQ,CAAC,EAAEyF,eAAe,CAAC,IAAIE,gBAAgB,KAAKnL,uBAAuB,CAACkO,gBAAgB;MAC9HpH,QAAQ,EAAEqH,YAAY;MACtB/G,WAAW,EAAEgH,eAAe;MAC5B/G,WAAW,EAAEgH,eAAe;MAC5B9G,UAAU,EAAE+G,cAAc;MAC1BhH,WAAW,EAAEiH,eAAe;MAC5BpH,SAAS,EAAEqH,aAAa;MACxBhH,MAAM,EAAEiH,UAAU;MAClBhH,QAAQ,EAAEiH,YAAY;MACtBlI,cAAc,EAAEA,cAAc;MAC9BD,cAAc,EAAEA;IAClB,CAAC;EACH,CAAC;;EAED;EACA;EACA,IAAIoI,aAAa,GAAG5P,OAAO,CAAC,YAAY;IACtC,OAAOO,eAAe,CAAC6D,IAAI,EAAE,UAAU8J,IAAI,EAAE;MAC3C,OAAOA,IAAI,CAACzH,QAAQ,CAAC;IACvB,CAAC,EAAE,UAAUyH,IAAI,EAAE;MACjB,OAAOA,IAAI,CAACvH,WAAW,CAAC;IAC1B,CAAC,CAAC;EACJ,CAAC,EAAE,CAACA,WAAW,EAAEvC,IAAI,EAAEqC,QAAQ,CAAC,CAAC;EACjC,IAAI2I,YAAY,GAAGpO,gBAAgB,CAAC,UAAU6M,QAAQ,EAAEnC,KAAK,EAAE;IAC7D,IAAImE,eAAe,EAAEC,gBAAgB,EAAEC,qBAAqB;IAC5D,IAAI,CAAClC,QAAQ,EAAE;MACb;IACF;IACA,IAAImC,SAAS,GAAGnC,QAAQ,CAACpH,QAAQ,CAAC;IAClC,IAAI,CAACoD,YAAY,EAAE;MACjBD,QAAQ,CAACoG,SAAS,CAAC;IACrB;IACArF,iBAAiB,CAACkD,QAAQ,CAACpH,QAAQ,CAAC,CAAC;IACrCwB,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAAC+H,SAAS,EAAEtE,KAAK,CAAC;IAC9E3D,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAAC8F,QAAQ,EAAEmC,SAAS,EAAEtE,KAAK,CAAC;IACxF1D,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAAC6F,QAAQ,EAAErN,kBAAkB,CAACqN,QAAQ,EAAE,UAAUW,IAAI,EAAE;MAC9H,OAAOoB,aAAa,CAACK,GAAG,CAACzB,IAAI,CAAC/H,QAAQ,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IACH,CAACoJ,eAAe,GAAGvG,MAAM,CAACgE,OAAO,MAAM,IAAI,IAAIuC,eAAe,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,eAAe,CAACnB,KAAK,CAAC,CAAC;IAC5G,CAACoB,gBAAgB,GAAG1G,OAAO,CAACkE,OAAO,MAAM,IAAI,IAAIwC,gBAAgB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACC,qBAAqB,GAAGD,gBAAgB,CAACI,KAAK,MAAM,IAAI,IAAIH,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACI,IAAI,CAACL,gBAAgB,CAAC;EAC/O,CAAC,CAAC;EACF,IAAIH,YAAY,GAAG3O,gBAAgB,CAAC,UAAUkN,IAAI,EAAE;IAClD,IAAIkC,oBAAoB,GAAGhO,YAAY,CAAC;MACtC8L,IAAI,EAAEA,IAAI;MACVmC,QAAQ,EAAE,CAACnC,IAAI,CAACO,MAAM;MACtBvH,gBAAgB,EAAEA,gBAAgB;MAClCT,QAAQ,EAAEA;IACZ,CAAC,CAAC;IACF4D,mBAAmB,CAAC+F,oBAAoB,CAAC;IACzC1H,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAAC0H,oBAAoB,EAAElC,IAAI,EAAEnL,4BAA4B,CAACmL,IAAI,EAAEA,IAAI,CAACzH,QAAQ,CAAC,EAAE;MAC1IA,QAAQ,EAAEA,QAAQ;MAClBE,WAAW,EAAEA;IACf,CAAC,CAAC,CAAC;IACH,IAAIpH,WAAW,CAACgI,WAAW,CAAC,IAAI,CAAC2G,IAAI,CAACO,MAAM,IAAIf,KAAK,CAACC,OAAO,CAACO,IAAI,CAACvH,WAAW,CAAC,CAAC,IAAIuH,IAAI,CAACvH,WAAW,CAAC,CAAC2J,MAAM,KAAK,CAAC,EAAE;MAClHnG,YAAY,CAAC+D,IAAI,EAAE3G,WAAW,CAAC;IACjC;EACF,CAAC,CAAC;EACF,IAAI8H,eAAe,GAAGrO,gBAAgB,CAAC,UAAU6M,QAAQ,EAAEnC,KAAK,EAAE;IAChE,IAAI9E,SAAS,EAAE;MACb,IAAI2J,mBAAmB;MACvB,IAAIC,aAAa,GAAGlQ,iBAAiB,CAACK,sBAAsB,CAACkN,QAAQ,CAACtH,QAAQ,CAAC,CAAC,EAAE8E,UAAU,CAAC,cAAc,CAAC,CAAC;MAC7G,CAACkF,mBAAmB,GAAG7E,KAAK,CAAC+E,YAAY,MAAM,IAAI,IAAIF,mBAAmB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,mBAAmB,CAACG,YAAY,CAACF,aAAa,EAAE,CAAC,EAAE,CAAC,CAAC;MACtJnE,eAAe,CAAC9K,eAAe,CAACsM,QAAQ,EAAElH,WAAW,EAAEF,QAAQ,CAAC,CAAC;MACjE8F,WAAW,CAACxB,YAAY,CAAC8C,QAAQ,CAAC8C,MAAM,CAAC,CAAC;MAC1CtI,WAAW,KAAK,IAAI,IAAIA,WAAW,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,WAAW,CAACwF,QAAQ,EAAEnC,KAAK,CAAC;IACxF;EACF,CAAC,CAAC;EACF,IAAI4D,eAAe,GAAGtO,gBAAgB,CAAC,UAAU6M,QAAQ,EAAEnC,KAAK,EAAE;IAChE,IAAIO,YAAY,CAACsC,IAAI,CAAC,UAAUqC,CAAC,EAAE;MACjC,OAAOxP,YAAY,CAACwP,CAAC,EAAE/C,QAAQ,CAACpH,QAAQ,CAAC,CAAC;IAC5C,CAAC,CAAC,EAAE;MACF;IACF;IACA,IAAI0F,QAAQ,EAAE;MACZG,kBAAkB,CAACuB,QAAQ,CAACpH,QAAQ,CAAC,CAAC;MACtC+F,mBAAmB,CAAChL,mBAAmB,CAACkK,KAAK,EAAEgB,aAAa,CAACmB,QAAQ,CAAC8C,MAAM,CAAC,CAAC,CAAC;IACjF;IACArI,WAAW,KAAK,IAAI,IAAIA,WAAW,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,WAAW,CAACuF,QAAQ,EAAEnC,KAAK,CAAC;EACxF,CAAC,CAAC;EACF,IAAI6D,cAAc,GAAGvO,gBAAgB,CAAC,UAAU6M,QAAQ,EAAEnC,KAAK,EAAE;IAC/D,IAAIO,YAAY,CAACsC,IAAI,CAAC,UAAUqC,CAAC,EAAE;MACjC,OAAOxP,YAAY,CAACwP,CAAC,EAAE/C,QAAQ,CAACpH,QAAQ,CAAC,CAAC;IAC5C,CAAC,CAAC,EAAE;MACFiF,KAAK,CAAC+E,YAAY,CAACI,UAAU,GAAG,MAAM;MACtC;IACF;IACA,IAAI1E,QAAQ,IAAI/K,YAAY,CAACyM,QAAQ,CAACpH,QAAQ,CAAC,EAAEyF,eAAe,CAAC,EAAE;MACjE,IAAI4E,oBAAoB,GAAGtP,mBAAmB,CAACkK,KAAK,EAAEgB,aAAa,CAACmB,QAAQ,CAAC8C,MAAM,CAAC,CAAC;MACrF,IAAIG,oBAAoB,KAAK1E,gBAAgB,EAAE;MAC/CI,mBAAmB,CAACsE,oBAAoB,CAAC;IAC3C;IACAtI,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACqF,QAAQ,EAAEnC,KAAK,CAAC;EACrF,CAAC,CAAC;EACF,IAAI8D,eAAe,GAAGxO,gBAAgB,CAAC,UAAU6M,QAAQ,EAAEnC,KAAK,EAAE;IAChEnD,WAAW,KAAK,IAAI,IAAIA,WAAW,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,WAAW,CAACsF,QAAQ,EAAEnC,KAAK,CAAC;EACxF,CAAC,CAAC;EACF,IAAI+D,aAAa,GAAGzO,gBAAgB,CAAC,UAAU6M,QAAQ,EAAEnC,KAAK,EAAE;IAC9DhL,iBAAiB,CAAC,CAAC;IACnB6L,WAAW,CAAC,IAAI,CAAC;IACjBF,eAAe,CAAC,EAAE,CAAC;IACnBC,kBAAkB,CAAC,IAAI,CAAC;IACxBlE,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACyF,QAAQ,EAAEnC,KAAK,CAAC;EAClF,CAAC,CAAC;EACF,IAAIgE,UAAU,GAAG1O,gBAAgB,CAAC,UAAU6M,QAAQ,EAAEnC,KAAK,EAAE;IAC3D,IAAIO,YAAY,CAACsC,IAAI,CAAC,UAAUqC,CAAC,EAAE;MACjC,OAAOxP,YAAY,CAACwP,CAAC,EAAE/C,QAAQ,CAACpH,QAAQ,CAAC,CAAC;IAC5C,CAAC,CAAC,EAAE;MACFsK,OAAO,CAACC,KAAK,CAAC,+CAA+C,CAAC;IAChE,CAAC,MAAM;MACL,IAAIC,QAAQ,GAAGrD,WAAW,CAACC,QAAQ,CAAC;MACpCpF,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACwI,QAAQ,EAAEvF,KAAK,CAAC;IACzE;IACAhL,iBAAiB,CAAC,CAAC;IACnB6L,WAAW,CAAC,IAAI,CAAC;IACjBF,eAAe,CAAC,EAAE,CAAC;IACnBC,kBAAkB,CAAC,IAAI,CAAC;EAC1B,CAAC,CAAC;EACF,IAAI4E,UAAU,GAAGlQ,gBAAgB,CAAC,YAAY;IAC5C,IAAImQ,iBAAiB,EAAEC,qBAAqB;IAC5C,CAACD,iBAAiB,GAAG/H,OAAO,CAACkE,OAAO,MAAM,IAAI,IAAI6D,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACC,qBAAqB,GAAGD,iBAAiB,CAACE,IAAI,MAAM,IAAI,IAAID,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACjB,IAAI,CAACgB,iBAAiB,CAAC;IAChP9D,eAAe,CAAC,CAAC;IACjBxF,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAAC,CAAC;IACxD2C,SAAS,CAAC,IAAI,CAAC;EACjB,CAAC,CAAC;EACF,IAAI8G,WAAW,GAAGtQ,gBAAgB,CAAC,YAAY;IAC7C,IAAIuQ,iBAAiB,EAAEC,qBAAqB,EAAEC,gBAAgB;IAC9D,CAACF,iBAAiB,GAAGnI,OAAO,CAACkE,OAAO,MAAM,IAAI,IAAIiE,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACC,qBAAqB,GAAGD,iBAAiB,CAACrB,KAAK,MAAM,IAAI,IAAIsB,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACrB,IAAI,CAACoB,iBAAiB,CAAC;IACjP1F,gBAAgB,CAAC,EAAE,CAAC;IACpBrB,SAAS,CAAC,KAAK,CAAC;IAChBG,iBAAiB,CAACiC,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACnG,QAAQ,CAAC,CAAC;IAC/F;AACJ;AACA;IACI,CAACgL,gBAAgB,GAAGnI,MAAM,CAACgE,OAAO,MAAM,IAAI,IAAImE,gBAAgB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,gBAAgB,CAAC/C,KAAK,CAAC,CAAC;EACjH,CAAC,CAAC;EACF,IAAIgD,eAAe,GAAG1Q,gBAAgB,CAAC,UAAU2Q,GAAG,EAAE;IACpD,IAAIC,cAAc,GAAG3P,iBAAiB,CAAC0J,YAAY,EAAE;MACnD3E,kBAAkB,EAAEA,kBAAkB;MACtCP,QAAQ,EAAEA,QAAQ;MAClBE,WAAW,EAAEA,WAAW;MACxBO,gBAAgB,EAAEA;IACpB,CAAC,EAAExE,WAAW,CAACkJ,kBAAkB,CAAC,CAAC;IACnC,IAAI2B,QAAQ,GAAG,GAAG,GAAGlC,UAAU,CAAC,YAAY,CAAC;IAC7C,IAAIwG,UAAU,GAAG;MACfnH,cAAc,EAAEA,cAAc;MAC9BkH,cAAc,EAAEA,cAAc;MAC9BlF,aAAa,EAAEA,aAAa;MAC5Ba,QAAQ,EAAEA,QAAQ;MAClB9G,QAAQ,EAAEA,QAAQ;MAClBoE,QAAQ,EAAE,SAASA,QAAQA,CAACiH,kBAAkB,EAAE;QAC9CnH,iBAAiB,CAACmH,kBAAkB,CAAC;MACvC;IACF,CAAC;IACD,IAAIH,GAAG,KAAKzQ,UAAU,CAAC6Q,IAAI,EAAE;MAC3B7P,aAAa,CAAC2P,UAAU,CAAC;MACzB;IACF;IACA,IAAIF,GAAG,KAAKzQ,UAAU,CAAC8Q,EAAE,EAAE;MACzBhQ,iBAAiB,CAAC6P,UAAU,CAAC;IAC/B;EACF,CAAC,CAAC;EACF,IAAII,eAAe,GAAGjR,gBAAgB,CAAC,YAAY;IACjD,IAAIxB,MAAM,CAACkL,cAAc,CAAC,EAAE;IAC5B,IAAIwH,SAAS,GAAG/P,aAAa,CAACuI,cAAc,EAAEK,YAAY,EAAEtE,QAAQ,CAAC;IACrElE,gBAAgB,CAAC;MACf2P,SAAS,EAAEA,SAAS;MACpBzD,MAAM,EAAEvH,gBAAgB,CAACiL,QAAQ,CAACD,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACzL,QAAQ,CAAC,CAAC;MAC5GiC,QAAQ,EAAEiH,YAAY;MACtBhJ,WAAW,EAAEA,WAAW;MACxByL,WAAW,EAAE,SAASA,WAAWA,CAAA,EAAG;QAClC,IAAIC,iBAAiB,EAAEC,kBAAkB;QACzC3H,iBAAiB,CAACuH,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACG,iBAAiB,GAAGH,SAAS,CAACK,MAAM,MAAM,IAAI,IAAIF,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,iBAAiB,CAAC5L,QAAQ,CAAC,CAAC;QAC/LjE,aAAa,CAAC0P,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACI,kBAAkB,GAAGJ,SAAS,CAACK,MAAM,MAAM,IAAI,IAAID,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kBAAkB,CAAC3B,MAAM,EAAEjE,aAAa,EAAE,GAAG,GAAGrB,UAAU,CAAC,YAAY,CAAC,CAAC;MAC5O;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EACF,IAAImH,gBAAgB,GAAGxR,gBAAgB,CAAC,YAAY;IAClD,IAAIxB,MAAM,CAACkL,cAAc,CAAC,EAAE;IAC5B,IAAIwH,SAAS,GAAG/P,aAAa,CAACuI,cAAc,EAAEK,YAAY,EAAEtE,QAAQ,CAAC;IACrEhE,iBAAiB,CAAC;MAChByP,SAAS,EAAEA,SAAS;MACpBzD,MAAM,EAAEvH,gBAAgB,CAACiL,QAAQ,CAACD,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACzL,QAAQ,CAAC,CAAC;MAC5GE,WAAW,EAAEA,WAAW;MACxB+B,QAAQ,EAAEiH,YAAY;MACtByC,WAAW,EAAE,SAASA,WAAWA,CAAA,EAAG;QAClCV,eAAe,CAACxQ,UAAU,CAAC6Q,IAAI,CAAC;MAClC;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EACF,IAAIU,gBAAgB,GAAGzR,gBAAgB,CAAC,UAAU0K,KAAK,EAAE;IACvD,IAAIlM,MAAM,CAACkL,cAAc,CAAC,EAAE;IAC5B,IAAIgI,UAAU,GAAGvQ,aAAa,CAACuI,cAAc,EAAEK,YAAY,EAAEtE,QAAQ,CAAC;IACtE2I,YAAY,CAACsD,UAAU,EAAEhH,KAAK,CAAC;EACjC,CAAC,CAAC;EACF,IAAIiH,WAAW,GAAG3R,gBAAgB,CAAC,UAAU0K,KAAK,EAAE;IAClD,IAAIkH,SAAS,GAAG,IAAI;IACpB,IAAItJ,MAAM,GAAGoC,KAAK,CAACpC,MAAM;IACzB;IACA,IAAIA,MAAM,CAACuJ,OAAO,CAAC,yBAAyB,CAAC,IAAI1N,QAAQ,IAAI,CAACI,SAAS,EAAE;MACvE;IACF;IACA,IAAI,CAACsE,YAAY,EAAE;MACjBD,QAAQ,CAAC,IAAI,CAAC;IAChB;IACA3B,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAAC2K,SAAS,EAAElH,KAAK,CAAC;EAChF,CAAC,CAAC;EACF,IAAIoH,eAAe,GAAGvP,qBAAqB,CAAClE,QAAQ,CAAC;IACnD0T,MAAM,EAAE,CAACnG,UAAU,IAAI,CAACrC,MAAM;IAC9BnB,OAAO,EAAEA,OAAO;IAChBE,MAAM,EAAEA,MAAM;IACdC,OAAO,EAAEA,OAAO;IAChBE,WAAW,EAAEA,WAAW;IACxBc,MAAM,EAAEA,MAAM;IACd7C,MAAM,EAAEiL,WAAW;IACnBxK,OAAO,EAAEmJ,WAAW;IACpBpO,aAAa,EAAE,SAASA,aAAaA,CAACwI,KAAK,EAAE;MAC3CvI,cAAc,CAACuI,KAAK,EAAE;QACpBsH,IAAI,EAAE,SAASA,IAAIA,CAAA,EAAG;UACpB,OAAOtB,eAAe,CAACxQ,UAAU,CAAC6Q,IAAI,CAAC;QACzC,CAAC;QACDkB,EAAE,EAAE,SAASA,EAAEA,CAAA,EAAG;UAChB,OAAOvB,eAAe,CAACxQ,UAAU,CAAC8Q,EAAE,CAAC;QACvC,CAAC;QACDkB,IAAI,EAAElK,GAAG,GAAGwJ,gBAAgB,GAAGP,eAAe;QAC9CkB,KAAK,EAAEnK,GAAG,GAAGiJ,eAAe,GAAGO,gBAAgB;QAC/CY,KAAK,EAAEX,gBAAgB;QACvBY,GAAG,EAAEV;MACP,CAAC,CAAC;IACJ;EACF,CAAC,EAAE7J,IAAI,CAAC,CAAC;EACT,IAAIwK,iBAAiB,GAAGtS,gBAAgB,CAAC,UAAU0K,KAAK,EAAE;IACxD,IAAI,CAAChC,QAAQ,CAAC4D,OAAO,EAAE;MACrB;IACF;IACAnK,cAAc,CAACuI,KAAK,EAAE;MACpBsH,IAAI,EAAE,SAASA,IAAIA,CAAA,EAAG;QACpB,OAAOtB,eAAe,CAACxQ,UAAU,CAAC6Q,IAAI,CAAC;MACzC,CAAC;MACDkB,EAAE,EAAE,SAASA,EAAEA,CAAA,EAAG;QAChB,OAAOvB,eAAe,CAACxQ,UAAU,CAAC8Q,EAAE,CAAC;MACvC,CAAC;MACDkB,IAAI,EAAElK,GAAG,GAAGwJ,gBAAgB,GAAGP,eAAe;MAC9CkB,KAAK,EAAEnK,GAAG,GAAGiJ,eAAe,GAAGO,gBAAgB;MAC/CY,KAAK,EAAEX;IACT,CAAC,CAAC;EACJ,CAAC,CAAC;EACF,IAAIc,UAAU,GAAG,SAASA,UAAUA,CAACrF,IAAI,EAAEd,KAAK,EAAEe,KAAK,EAAE;IACvD,IAAI,CAACD,IAAI,CAACjB,OAAO,EAAE;MACjB,OAAO,IAAI;IACb;IACA,IAAI2B,QAAQ,GAAGV,IAAI,CAACvH,WAAW,CAAC;IAChC,IAAI8H,MAAM,GAAGpN,sBAAsB,CAACuK,kBAAkB,EAAE1E,gBAAgB,CAACiL,QAAQ,CAACjE,IAAI,CAACzH,QAAQ,CAAC,CAAC,CAAC;IAClG,IAAI+M,eAAe,GAAG/T,YAAY,CAACmM,kBAAkB,CAAC,IAAIA,kBAAkB,CAAC0E,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC1B,QAAQ,GAAGtN,kBAAkB,CAAC4M,IAAI,EAAEvH,WAAW,CAAC;IAC9I,IAAI8M,SAAS,GAAGpU,QAAQ,CAAC,CAAC,CAAC,EAAE4O,gBAAgB,CAAC5O,QAAQ,CAAC,CAAC,CAAC,EAAE6O,IAAI,EAAE;MAC/DO,MAAM,EAAEA;IACV,CAAC,CAAC,EAAEN,KAAK,EAAEf,KAAK,CAAC,EAAE;MACjBsG,WAAW,EAAEF;IACf,CAAC,CAAC;IACF,IAAIC,SAAS,CAACC,WAAW,EAAE;MACzB,IAAIC,MAAM;MACVxF,KAAK,IAAI,CAAC;MACV,IAAIyF,SAAS,GAAGvI,UAAU,CAAC,MAAM,CAAC;MAClC,IAAIwI,aAAa,GAAG1I,KAAK,CAACE,UAAU,CAAC,eAAe,CAAC,GAAGsI,MAAM,GAAG,CAAC,CAAC,EAAEA,MAAM,CAACC,SAAS,CAAC,GAAGnF,MAAM,IAAI+E,eAAe,EAAEG,MAAM,CAAC,CAAC;MAC5H,IAAIG,KAAK,GAAGlF,QAAQ,IAAI,EAAE;MAC1B,OAAO,aAAahP,KAAK,CAACmU,aAAa,CAAC,KAAK,EAAE;QAC7C7O,SAAS,EAAE2O,aAAa;QACxBlC,GAAG,EAAEzD,IAAI,CAACzH,QAAQ;MACpB,CAAC,EAAE,aAAa7G,KAAK,CAACmU,aAAa,CAAC1T,QAAQ,EAAEhB,QAAQ,CAAC,CAAC,CAAC,EAAEoU,SAAS,EAAE;QACpE1P,GAAG,EAAE,SAASA,GAAGA,CAACiQ,IAAI,EAAE;UACtB,OAAOrH,eAAe,CAACqH,IAAI,EAAE9F,IAAI,CAACyC,MAAM,CAAC;QAC3C;MACF,CAAC,CAAC,CAAC,EAAE,aAAa/Q,KAAK,CAACmU,aAAa,CAAC,KAAK,EAAE;QAC3C7O,SAAS,EAAEmG,UAAU,CAAC,OAAO,CAAC;QAC9B4I,IAAI,EAAE;MACR,CAAC,EAAEH,KAAK,CAAC5G,GAAG,CAAC,UAAUgH,KAAK,EAAEC,CAAC,EAAE;QAC/B,OAAOZ,UAAU,CAACW,KAAK,EAAEC,CAAC,EAAEhG,KAAK,CAAC;MACpC,CAAC,CAAC,EAAE3J,cAAc,IAAI,aAAa5E,KAAK,CAACmU,aAAa,CAAC,MAAM,EAAE;QAC7D7O,SAAS,EAAEmG,UAAU,CAAC,aAAa,CAAC;QACpC9G,KAAK,EAAE9D,iBAAiB,CAACuI,GAAG,EAAEmF,KAAK,GAAG,CAAC,EAAE,IAAI;MAC/C,CAAC,CAAC,CAAC,CAAC;IACN;IACA,OAAO,aAAavO,KAAK,CAACmU,aAAa,CAAC1T,QAAQ,EAAEhB,QAAQ,CAAC;MACzD0E,GAAG,EAAE,SAASA,GAAGA,CAACqQ,KAAK,EAAE;QACvB,OAAOzH,eAAe,CAACyH,KAAK,EAAElG,IAAI,CAACyC,MAAM,CAAC;MAC5C,CAAC;MACDgB,GAAG,EAAEzD,IAAI,CAACzH,QAAQ;IACpB,CAAC,EAAEgN,SAAS,CAAC,CAAC;EAChB,CAAC;EACD,IAAIY,qBAAqB,GAAG,SAASA,qBAAqBA,CAACC,KAAK,EAAE;IAChE,IAAIlH,KAAK,GAAGkH,KAAK,CAAClH,KAAK;MACrB7I,KAAK,GAAG+P,KAAK,CAAC/P,KAAK;MACnBH,IAAI,GAAGkQ,KAAK,CAAClQ,IAAI;IACnB,IAAI8J,IAAI,GAAG9J,IAAI,CAACgJ,KAAK,CAAC;IACtB,IAAIe,KAAK,GAAGD,IAAI,CAACC,KAAK;MACpBlB,OAAO,GAAGiB,IAAI,CAACjB,OAAO;IACxB,IAAIwB,MAAM,GAAGpN,sBAAsB,CAACuK,kBAAkB,EAAE1E,gBAAgB,CAACiL,QAAQ,CAACjE,IAAI,CAACzH,QAAQ,CAAC,CAAC,CAAC;IAClG,IAAI,CAACyH,IAAI,CAACjB,OAAO,EAAE;MACjB,OAAO,IAAI;IACb;IACA,IAAIwG,SAAS,GAAGpU,QAAQ,CAAC,CAAC,CAAC,EAAE4O,gBAAgB,CAAC5O,QAAQ,CAAC,CAAC,CAAC,EAAE6O,IAAI,EAAE;MAC/DO,MAAM,EAAEA;IACV,CAAC,CAAC,EAAEN,KAAK,CAAC,EAAE;MACV5J,KAAK,EAAEA,KAAK;MACZmP,WAAW,EAAExF,IAAI,CAACwF;IACpB,CAAC,CAAC;IACF,OAAOzG,OAAO,IAAI,aAAarN,KAAK,CAACmU,aAAa,CAAC1T,QAAQ,EAAEhB,QAAQ,CAAC;MACpE0E,GAAG,EAAE,SAASA,GAAGA,CAACwQ,KAAK,EAAE;QACvB,OAAO5H,eAAe,CAAC4H,KAAK,EAAErG,IAAI,CAACyC,MAAM,CAAC;MAC5C;IACF,CAAC,EAAE8C,SAAS,CAAC,CAAC;EAChB,CAAC;EACD,IAAIe,UAAU,GAAG,SAASA,UAAUA,CAAA,EAAG;IACrC,IAAIC,OAAO;IACX,IAAIC,OAAO,GAAGvJ,KAAK,CAACG,mBAAmB,CAAC;MACtC3F,WAAW,EAAEA;IACf,CAAC,CAAC,GAAG8O,OAAO,GAAG,CAAC,CAAC,EAAEA,OAAO,CAACvP,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAGA,SAAS,GAAG,EAAE,CAAC,GAAGgE,MAAM,EAAEuL,OAAO,CAAC,CAAC;IAC3G,IAAIhH,cAAc,GAAGZ,iBAAiB,CAAC0G,UAAU,CAAC;IAClD,IAAIoB,aAAa,GAAG;MAClB5Q,GAAG,EAAE2F;IACP,CAAC;IACD,IAAIR,MAAM,EAAE;MACVyL,aAAa,GAAGtV,QAAQ,CAAC;QACvB0E,GAAG,EAAEsF,IAAI;QACT9E,KAAK,EAAElF,QAAQ,CAAC;UACdyF,MAAM,EAAEA;QACV,CAAC,EAAEP,KAAK,CAAC;QACTqQ,SAAS,EAAEtB;MACb,CAAC,EAAExK,IAAI,CAAC;IACV;IACA,OAAO,aAAalJ,KAAK,CAACmU,aAAa,CAAClR,QAAQ,EAAExD,QAAQ,CAAC,CAAC,CAAC,EAAEsV,aAAa,EAAE;MAC5EE,iBAAiB,EAAExJ,UAAU,CAAC,MAAM,CAAC;MACrCnG,SAAS,EAAEwP;IACb,CAAC,CAAC,EAAE/O,WAAW,GAAG,aAAa/F,KAAK,CAACmU,aAAa,CAAC5T,SAAS,EAAE;MAC5D2U,aAAa,EAAE5L,MAAM,GAAGpE,MAAM,GAAGE,aAAa;MAC9CT,KAAK,EAAE;QACLwQ,KAAK,EAAE,MAAM;QACbjQ,MAAM,EAAE;MACV;IACF,CAAC,EAAE,UAAUkQ,KAAK,EAAE;MAClB,IAAIlQ,MAAM,GAAGkQ,KAAK,CAAClQ,MAAM;MACzB,OAAO,aAAalF,KAAK,CAACmU,aAAa,CAAC7T,IAAI,EAAEb,QAAQ,CAAC;QACrD0E,GAAG,EAAEyF,IAAI;QACT1E,MAAM,EAAEA,MAAM;QACdnB,QAAQ,EAAEA,QAAQ;QAClBsR,SAAS,EAAExH,cAAc,CAAC6C,MAAM;QAChC4E,QAAQ,EAAEzH;MACZ,CAAC,EAAEnG,SAAS,CAAC,EAAE+M,qBAAqB,CAAC;IACvC,CAAC,CAAC,GAAG5G,cAAc,CAAC;EACtB,CAAC;EACD,IAAI0H,cAAc,GAAG,SAASA,cAAcA,CAACC,aAAa,EAAEC,UAAU,EAAE;IACtE,IAAInC,IAAI,GAAGkC,aAAa,CAAClC,IAAI;MAC3BoC,GAAG,GAAGF,aAAa,CAACE,GAAG;MACvBpQ,SAAS,GAAGkQ,aAAa,CAAClQ,SAAS;IACrC,IAAIwP,OAAO,GAAGvJ,KAAK,CAACjG,SAAS,EAAEe,aAAa,EAAEiF,MAAM,CAAC,WAAW,CAAC,CAAC;IAClE,IAAIqK,eAAe,GAAGlW,QAAQ,CAAC,CAAC,CAAC,EAAE4F,SAAS,EAAE;MAC5CiO,IAAI,EAAEA,IAAI;MACVoC,GAAG,EAAEA;IACP,CAAC,CAAC;IACF,OAAO,aAAa1V,KAAK,CAACmU,aAAa,CAACnR,WAAW,EAAE;MACnD4S,SAAS,EAAErP,aAAa;MACxBjB,SAAS,EAAEwP,OAAO;MAClBnQ,KAAK,EAAEgR,eAAe;MACtBxR,GAAG,EAAE5C,SAAS,CAACoI,OAAO,EAAE8L,UAAU,CAAC;MACnCT,SAAS,EAAE9B,eAAe;MAC1BxJ,MAAM,EAAEF;IACV,CAAC,EAAE3D,UAAU,GAAG,aAAa7F,KAAK,CAACmU,aAAa,CAACvQ,SAAS,EAAE;MAC1DuC,WAAW,EAAEnB,MAAM,CAAC6Q,iBAAiB;MACrCxN,QAAQ,EAAE6D,YAAY;MACtBpH,KAAK,EAAEkH,kBAAkB;MACzB8J,QAAQ,EAAEjM;IACZ,CAAC,CAAC,GAAG,IAAI,EAAEb,UAAU,GAAGA,UAAU,CAAC4L,UAAU,CAAC,CAAC,CAAC,GAAGA,UAAU,CAAC,CAAC,EAAE7L,iBAAiB,KAAK,IAAI,IAAIA,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,iBAAiB,CAAC,CAAC,CAAC;EAC7J,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAIgN,aAAa,GAAG,CAACnW,MAAM,CAACoN,UAAU,CAAC,IAAI,CAACpN,MAAM,CAACkF,KAAK,CAAC,IAAInF,WAAW,CAACsJ,WAAW,CAAC;EACrF,IAAI+M,eAAe,GAAG7P,WAAW;EACjC,IAAI4P,aAAa,EAAE;IACjB,IAAIzH,IAAI,GAAGtB,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAGA,UAAU,GAAG,CAAC,CAAC;IACzEgJ,eAAe,GAAG1H,IAAI,CAAC3H,QAAQ,CAAC;IAChC,IAAIhH,WAAW,CAACsJ,WAAW,CAAC,IAAInE,KAAK,EAAE;MACrCkR,eAAe,GAAG/M,WAAW,CAACnE,KAAK,EAAEwJ,IAAI,EAAE0H,eAAe,CAAC;MAC3D,IAAIpW,MAAM,CAACoW,eAAe,CAAC,EAAE;QAC3BD,aAAa,GAAG,KAAK;MACvB;IACF;EACF;EACA,IAAIE,mBAAmB,GAAG7S,kBAAkB,CAAC3D,QAAQ,CAAC,CAAC,CAAC,EAAEyE,KAAK,EAAE;MAC7D+B,WAAW,EAAEA,WAAW;MACxBvB,UAAU,EAAEA,UAAU;MACtBwR,QAAQ,EAAEH,aAAa;MACvBI,IAAI,EAAE,MAAM;MACZxQ,SAAS,EAAEA;IACb,CAAC,CAAC,CAAC;IACHmP,OAAO,GAAGmB,mBAAmB,CAAC,CAAC,CAAC;IAChCG,qBAAqB,GAAGH,mBAAmB,CAAC,CAAC,CAAC;EAChD,IAAI3M,MAAM,EAAE;IACV,OAAOsL,UAAU,CAAC,CAAC;EACrB;EACA,OAAO,aAAa5U,KAAK,CAACmU,aAAa,CAACjR,mBAAmB,EAAE;IAC3DuE,EAAE,EAAEA,EAAE;IACN4O,SAAS,EAAE,MAAM;IACjBC,WAAW,EAAEvW,KAAK,CAACmE,KAAK,EAAET,mBAAmB,CAAC;IAC9CU,GAAG,EAAEqF,OAAO;IACZ/D,SAAS,EAAEA,SAAS;IACpB8Q,OAAO,EAAEjF,UAAU;IACnBhJ,SAAS,EAAEA,SAAS;IACpBR,MAAM,EAAE9G,qBAAqB,CAACuH,OAAO,EAAET,MAAM,CAAC;IAC9CC,QAAQ,EAAE/G,qBAAqB,CAAC0Q,WAAW,EAAE3J,QAAQ,CAAC;IACtDyO,OAAO,EAAEjB;EACX,CAAC,EAAE,aAAavV,KAAK,CAACmU,aAAa,CAAC7P,SAAS,EAAE;IAC7CgB,SAAS,EAAEwP,OAAO;IAClBnQ,KAAK,EAAEA,KAAK;IACZR,GAAG,EAAEsF;EACP,CAAC,EAAE,aAAazJ,KAAK,CAACmU,aAAa,CAACpR,YAAY,EAAEtD,QAAQ,CAAC,CAAC,CAAC,EAAEK,KAAK,CAACoJ,IAAI,EAAE,EAAE,CAACuN,MAAM,CAAC/S,mBAAmB,EAAE0S,qBAAqB,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;IAC9IjS,GAAG,EAAEuF,MAAM;IACXhF,UAAU,EAAEA,UAAU;IACtBsQ,SAAS,EAAE9B,eAAe;IAC1BlL,OAAO,EAAEhH,qBAAqB,CAAC+R,WAAW,EAAE/K,OAAO,CAAC;IACpDrC,SAAS,EAAEA,SAAS,IAAI,CAACJ,QAAQ;IACjClB,EAAE,EAAEoC,QAAQ;IACZlB,QAAQ,EAAEA,QAAQ;IAClB2Q,QAAQ,EAAEH,aAAa;IACvBpL,MAAM,EAAEA,MAAM;IACdlF,SAAS,EAAEA,SAAS;IACpBiR,UAAU,EAAE5R,KAAK;IACjBgG,cAAc,EAAEA;EAClB,CAAC,CAAC,EAAEkL,eAAe,IAAIhR,MAAM,CAACmB,WAAW,CAAC,CAAC,CAAC;AAC9C,CAAC,CAAC;AACFnC,UAAU,CAAC2S,WAAW,GAAG,YAAY;AACrC3S,UAAU,CAAC4S,SAAS,GAAGnX,QAAQ,CAAC,CAAC,CAAC,EAAE+D,mBAAmB,EAAE;EACvDwB,MAAM,EAAE3E,SAAS,CAACwW,GAAG;EACrBnS,UAAU,EAAElE,KAAK,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;EACxC0E,MAAM,EAAE7E,SAAS,CAACyW,MAAM;EACxB9P,SAAS,EAAE3G,SAAS,CAAC0W,IAAI;EACzBhR,WAAW,EAAE1F,SAAS,CAAC0W,IAAI;EAC3BlR,UAAU,EAAExF,SAAS,CAAC0W,IAAI;EAC1BxQ,aAAa,EAAElG,SAAS,CAAC0W,IAAI;EAC7B3Q,aAAa,EAAE/F,SAAS,CAAC2W,MAAM;EAC/B9P,gBAAgB,EAAE7G,SAAS,CAAC0W,IAAI;EAChCzP,gBAAgB,EAAEjH,SAAS,CAAC4W,KAAK;EACjCzP,uBAAuB,EAAEnH,SAAS,CAAC4W,KAAK;EACxC/O,QAAQ,EAAE7H,SAAS,CAAC6W,IAAI;EACxBpO,QAAQ,EAAEzI,SAAS,CAAC6W,IAAI;EACxB/O,QAAQ,EAAE9H,SAAS,CAAC6W,IAAI;EACxBlO,UAAU,EAAE3I,SAAS,CAAC6W,IAAI;EAC1BrP,cAAc,EAAExH,SAAS,CAAC6W,IAAI;EAC9BtP,cAAc,EAAEvH,SAAS,CAAC6W,IAAI;EAC9BnO,iBAAiB,EAAE1I,SAAS,CAAC6W,IAAI;EACjCC,cAAc,EAAE9W,SAAS,CAAC6W,IAAI;EAC9B1Q,QAAQ,EAAEnG,SAAS,CAAC6W;AACtB,CAAC,CAAC;AACF,eAAelT,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}